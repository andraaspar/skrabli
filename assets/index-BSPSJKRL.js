const HIGHLIGHT="color: hotpink; background-color: black; border-radius: 0.25em",cmp=globalThis.cmp={};function getNoError$1(fallback,...getters){for(const getter of getters)try{return getter()}catch{}return fallback}let logLevel=getNoError$1(0,()=>JSON.parse(sessionStorage.LOG_LEVEL));function setLogLevel(it){sessionStorage.LOG_LEVEL=JSON.stringify(it),logLevel=it}cmp.setLogLevel=setLogLevel;cmp.getLogLevel=()=>logLevel;const debugNameByInit=new Map,activeComps=[];class Comp extends HTMLElement{props;init;debugName="c-mp";parentComp;kills=[];onError;wasConnected=!1;level=0;connectedCallback(){if(this.parentComp=activeComps.at(-1)??this.parentElement?.closest("c-mp"),this.level=(this.parentComp?.level??-1)+1,this.debugName=((this.init&&debugNameByInit.get(this.init))??"c-mp")+(this.props?.debugName?`(${this.props.debugName})`:"")+`<${this.level}>`,this.wasConnected)throw new Error(`[swczjp] Component ${this.debugName} was already connected.`);if(!this.isConnected)throw new Error(`[t2twu3] Component ${this.debugName} was not connected after all.`);this.wasConnected=!0,logLevel>=3&&console.debug(`üî∞ ‚òÄÔ∏è Component connected: %c${this.debugName}%c inside %c${this.parentComp?.debugName??`<${this.parentNode?.nodeName}>`}%c`,HIGHLIGHT,void 0,HIGHLIGHT),this.setAttribute("is",this.debugName),activeComps.push(this);try{this.init?.(this.props,this)}catch(e){this.handleError(e)}finally{activeComps.pop(),logLevel>=3&&console.debug(`üõë ‚òÄÔ∏è Component connected: %c${this.debugName}%c inside %c${this.parentComp?.debugName??`<${this.parentNode?.nodeName}>`}%c`,HIGHLIGHT,void 0,HIGHLIGHT)}}handleError(e){let handled=!1;if(this.onError)try{logLevel>=3&&console.debug(`üî∞ üéØ Handling error: %c${this.debugName}`,HIGHLIGHT),this.onError(e),handled=!0}catch(e2){console.error(e2)}finally{logLevel>=3&&console.debug(`üõë üéØ Handling error: %c${this.debugName}`,HIGHLIGHT)}handled||(this.parentComp?(logLevel>=3&&console.debug(`üî∞ üîç Looking for error handler: %c${this.debugName}`,HIGHLIGHT),this.parentComp.handleError(e),logLevel>=3&&console.debug(`üõë üîç Looking for error handler: %c${this.debugName}`,HIGHLIGHT)):(logLevel>=3&&console.debug(`üî∞ ‚ö†Ô∏è Failed to handle error: %c${this.debugName}`,HIGHLIGHT),console.error(e),this.remove(),logLevel>=3&&console.debug(`üõë ‚ö†Ô∏è Failed to handle error: %c${this.debugName}`,HIGHLIGHT)))}disconnectedCallback(){if(this.wasConnected){for(logLevel>=3&&console.debug(`üî∞ üåë Component disconnected: %c${this.debugName}%c from %c${this.parentComp?.debugName??`<${this.parentNode?.nodeName}>`}%c`,HIGHLIGHT,void 0,HIGHLIGHT),this.parentComp=void 0;this.kills.length;)this.kills.pop()();this.innerHTML="",this.wasConnected=!1,logLevel>=3&&console.debug(`üõë üåë Component disconnected: %c${this.debugName}`,HIGHLIGHT)}}}customElements.define("c-mp",Comp);function defineComponent(debugName,init){return debugNameByInit.set(init,debugName),init}const activeEffects=[],queue=[];let noScheduledEffectsCallbacks=[];function queueEffect(effect){if(queue.length===0)queue.push(effect),queueMicrotask(runEffect);else{const index=queue.findLastIndex(it=>it.priority<=effect.priority)+1;queue.splice(index,0,effect)}}function runEffect(){const hasMore=queue.length>1;try{logLevel>=3?console.debug("ü§π Running first effect from queue:",queue.map(it=>it.name)):logLevel>=2&&console.debug("ü§π Running first effect from queue:",queue.length),queue.shift().run()}catch(e){console.error(e)}finally{if(hasMore)queueMicrotask(runEffect);else if(queue.length===0){logLevel>=2&&console.debug("üèÅ All effects are done.");for(let i=noScheduledEffectsCallbacks.length-1;i>=0;i--)try{noScheduledEffectsCallbacks[i]?.()}catch(e){console.error(e)}finally{noScheduledEffectsCallbacks.splice(i,1)}}}}function useEffect(name,fn,parentName=activeComps.at(-1)?.debugName){name=`${parentName} ‚Üí ${name}`;let proxyTracker={name,rerun:run,chain:[]},lastCleanup,isScheduled=!1,isKilled=!1;function kill(){isKilled||(isKilled=!0,runLastCleanup(),logLevel>=3&&console.debug(`üíÄ Killed effect: %c${name}`,HIGHLIGHT))}function runLastCleanup(){if(proxyTracker.rerun=void 0,!!lastCleanup)try{logLevel>=3&&console.debug(`üî∞ üßπ Cleaning up effect: %c${name}`,HIGHLIGHT),lastCleanup()}catch(e){parentComponent?parentComponent.handleError(e):console.error(e)}finally{lastCleanup=void 0,logLevel>=3&&console.debug(`üõë üßπ Cleaning up effect: %c${name}`,HIGHLIGHT)}}function run(){if(isKilled||isScheduled)return;const chain=getEffectChain(name);isScheduled=!0,queueEffect({priority,name,run:()=>{if(!isKilled){isScheduled=!1,runLastCleanup();try{proxyTracker={name,rerun:run,chain},logLevel>=2&&console.debug(`üî∞ ‚ñ∂Ô∏è Effect run: %c${name}`,HIGHLIGHT),activeEffects.push(proxyTracker),lastCleanup=fn()}catch(e){parentComponent.handleError(e)}finally{activeEffects.pop(),logLevel>=2&&console.debug(`üõë ‚ñ∂Ô∏è Effect run: %c${name}`,HIGHLIGHT)}}}})}const parentComponent=activeComps.at(-1);parentComponent?.kills.push(kill);const priority=parentComponent?.level??-1;try{run()}catch(e){throw parentComponent?.handleError(e),e}return kill}function getEffectChain(name){const chain=[...activeEffects.at(-1)?.chain??[],name];if(chain.length>500)throw console.debug("Infinite effect recursion chain:",chain),new Error("[svhnon] Infinite effect recursion.");return chain}function untrack(name,fn,parentName=activeEffects.at(-1)?.name??"-"){name=`${parentName} ‚Üí ${name}`;try{return activeEffects.push({name:`${name} (untrack)`,chain:getEffectChain(name)}),fn()}finally{activeEffects.pop()}}function allEffectsDone(){return new Promise(resolve=>{queue.length===0?resolve():noScheduledEffectsCallbacks.push(resolve)})}const Slot=defineComponent("Slot",(props,$)=>(useEffect("value changed [t6e03o]",()=>{let value=props.get?.();untrack("apply value [t6e03y]",()=>{$.innerHTML="",value&&(props.isTrustedHtml&&typeof value=="string"?$.innerHTML=value:Array.isArray(value)?$.append(...value.map(expandSlots)):$.append(expandSlots(value)))})}),$));function expandSlots(child){return typeof child=="function"?h(Slot,{get:child}):child}function h(name,attrs){attrs.children!=null&&(Array.isArray(attrs.children)?attrs.children=attrs.children.map(expandSlots):attrs.children=[expandSlots(attrs.children)]);let elem;if(typeof name=="function")elem=h("c-mp",{init:name,props:attrs});else{elem=document.createElement(name);for(const[k,v]of Object.entries(attrs))k==="class"?typeof v=="function"?useEffect(`${name} ‚Üí ${k}`,()=>{const it=v();Array.isArray(it)?elem.className=it.filter(Boolean).join(" "):typeof it=="string"?elem.className=it:elem.className=""}):Array.isArray(v)?elem.className=v.filter(Boolean).join(" "):elem.className=v:k==="style"?typeof v=="function"?useEffect(`${name} ‚Üí ${k}`,()=>{const it=v();it&&typeof it=="object"&&Object.assign(elem.style,it)}):v&&typeof v=="object"&&Object.assign(elem.style,v):k!=="children"&&k!=="ref"&&typeof v=="function"&&!k.startsWith("on")&&!name.includes("-")?useEffect(`${name} ‚Üí ${k}`,()=>{elem[k]=v()}):k!=="children"&&(elem[k]=v);attrs.children&&elem.append(...attrs.children)}if(attrs.ref)try{attrs.ref(elem)}catch(e){console.error(e)}return elem}const Fragment=defineComponent("Fragment",(props,$)=>($.append(...props.children),$)),jsx=h,jsxs=h,scriptRel=(function(){const relList=typeof document<"u"&&document.createElement("link").relList;return relList&&relList.supports&&relList.supports("modulepreload")?"modulepreload":"preload"})(),assetsURL=function(dep,importerUrl){return new URL(dep,importerUrl).href},seen={},__vitePreload=function(baseModule,deps,importerUrl){let promise=Promise.resolve();if(deps&&deps.length>0){let allSettled=function(promises$2){return Promise.all(promises$2.map(p=>Promise.resolve(p).then(value$1=>({status:"fulfilled",value:value$1}),reason=>({status:"rejected",reason}))))};const links=document.getElementsByTagName("link"),cspNonceMeta=document.querySelector("meta[property=csp-nonce]"),cspNonce=cspNonceMeta?.nonce||cspNonceMeta?.getAttribute("nonce");promise=allSettled(deps.map(dep=>{if(dep=assetsURL(dep,importerUrl),dep in seen)return;seen[dep]=!0;const isCss=dep.endsWith(".css"),cssSelector=isCss?'[rel="stylesheet"]':"";if(importerUrl)for(let i$1=links.length-1;i$1>=0;i$1--){const link$1=links[i$1];if(link$1.href===dep&&(!isCss||link$1.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${dep}"]${cssSelector}`))return;const link=document.createElement("link");if(link.rel=isCss?"stylesheet":scriptRel,isCss||(link.as="script"),link.crossOrigin="",link.href=dep,cspNonce&&link.setAttribute("nonce",cspNonce),document.head.appendChild(link),isCss)return new Promise((res,rej)=>{link.addEventListener("load",res),link.addEventListener("error",()=>rej(new Error(`Unable to preload CSS for ${dep}`)))})}))}function handlePreloadError(err$2){const e$1=new Event("vite:preloadError",{cancelable:!0});if(e$1.payload=err$2,window.dispatchEvent(e$1),!e$1.defaultPrevented)throw err$2}return promise.then(res=>{for(const item of res||[])item.status==="rejected"&&handlePreloadError(item.reason);return baseModule().catch(handlePreloadError)})};function registerSW(options2={}){const{immediate=!1,onNeedRefresh,onOfflineReady,onRegistered,onRegisteredSW,onRegisterError}=options2;let wb,registerPromise,sendSkipWaitingMessage;const updateServiceWorker2=async(_reloadPage=!0)=>{await registerPromise,sendSkipWaitingMessage?.()};async function register(){if("serviceWorker"in navigator){if(wb=await __vitePreload(async()=>{const{Workbox}=await import("./workbox-window.prod.es5-BJYH-Q-B.js");return{Workbox}},[],import.meta.url).then(({Workbox})=>new Workbox("./service-worker.js",{scope:"./",type:"classic"})).catch(e=>{onRegisterError?.(e)}),!wb)return;sendSkipWaitingMessage=()=>{wb?.messageSkipWaiting()};{let onNeedRefreshCalled=!1;const showSkipWaitingPrompt=()=>{onNeedRefreshCalled=!0,wb?.addEventListener("controlling",event=>{event.isUpdate&&window.location.reload()}),onNeedRefresh?.()};wb.addEventListener("installed",event=>{typeof event.isUpdate>"u"?typeof event.isExternal<"u"&&event.isExternal?showSkipWaitingPrompt():!onNeedRefreshCalled&&onOfflineReady?.():event.isUpdate||onOfflineReady?.()}),wb.addEventListener("waiting",showSkipWaitingPrompt)}wb.register({immediate}).then(r=>{onRegisteredSW?onRegisteredSW("./service-worker.js",r):onRegistered?.(r)}).catch(e=>{onRegisterError?.(e)})}}return registerPromise=register(),updateServiceWorker2}const unwrapped=Symbol("unwrapped");function proxify(name,o,cbs){if(!isProxifyable(o))throw new Error("[svh9tl] Object or array required.");return o=unproxify(o),new Proxy(o,{has(target,p){return p===unwrapped?!0:(cbs?.has?.(name,target,p),Reflect.has(target,p))},get(target,p,receiver){if(p===unwrapped)return target;cbs?.get?.(name,target,p);const result2=Reflect.get(target,p,receiver);if(isProxifyable(result2)){const cachedProxy=cbs?.cache?.get(result2);if(cachedProxy)return cachedProxy;const newProxy=proxify(name+"."+p.toString(),result2,cbs);return cbs?.cache&&cbs.cache.set(result2,newProxy),newProxy}else return result2},set(target,p,newValue,receiver){let result2=!0,hadKey=p in target,oldValue=target[p];return newValue=unproxify(newValue),Object.is(oldValue,newValue)||(result2=Reflect.set(target,p,newValue,receiver),result2||console.error(`[t68ki1] ${name}.${p.toString()} could not be set:`,oldValue,"‚úèÔ∏è",newValue,"target:",target),cbs?.set?.(name,target,p,newValue)),!hadKey&&Array.isArray(target)&&cbs?.set?.(name,target,"length",target.length),result2},deleteProperty(target,p){let result2=!0;return p in target&&(result2=Reflect.deleteProperty(target,p),cbs?.delete?.(name,target,p)),result2}})}function isProxifyable(o){return o!=null&&typeof o=="object"&&(Array.isArray(o)||Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}function unproxify(o){for(;o!=null&&typeof o=="object"&&unwrapped in o;)o=o[unwrapped];return o}const target__props__effects=new WeakMap;let allowMutation=0;function runEffects(name,action,target,prop,value){allowMutation||console.error("üëæ Unlabeled mutation!"),logLevel>=1&&console.debug(`${action==="SET"?"‚úèÔ∏è":"üóëÔ∏è"} State ${action}: %c${name}.${prop.toString()}`,HIGHLIGHT,"=",value);let props__effects=target__props__effects.get(target);if(!props__effects)return;let effects=props__effects.get(prop);if(!effects)return;const effectsArr=Array.from(effects);if(effectsArr.length)for(let i=0;i<effectsArr.length;i++){const effect=effectsArr[i];effect.rerun?effect.rerun():effects.delete(effect)}}function trackEffect(name,target,prop){const activeEffect=activeEffects.at(-1);if(!activeEffect)return;logLevel>=3&&console.debug(`üîå State GET: %c${name}.${prop.toString()}`,HIGHLIGHT);let props__effects=target__props__effects.get(target);props__effects||(props__effects=new Map,target__props__effects.set(target,props__effects));let effects=props__effects.get(prop);effects||(effects=new Set,props__effects.set(prop,effects)),effects.add(activeEffect)}const CBS={has(name,target,prop){trackEffect(name,target,prop)},get(name,target,prop){trackEffect(name,target,prop)},set(name,target,prop,value){runEffects(name,"SET",target,prop,value)},delete(name,target,prop){runEffects(name,"DELETE",target,prop,void 0)},cache:new WeakMap};function useState(name,o,parentName=activeComps.at(-1)?.debugName??"-"){return proxify(`${parentName} ‚Üí ${name}`,o,CBS)}async function mutateState(parent,name,fn){try{console.log(logLevel>=1?"üî∞ üëæ":"üëæ",parent,name),allowMutation++,fn()}finally{allowMutation--}logLevel>=1&&(await allEffectsDone(),console.debug("üõë üëæ",parent,name))}const okIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
</svg>`,loadingSvg=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-stopwatch" viewBox="0 0 16 16">
  <path d="M8.5 5.6a.5.5 0 1 0-1 0v2.9h-3a.5.5 0 0 0 0 1H8a.5.5 0 0 0 .5-.5z"/>
  <path d="M6.5 1A.5.5 0 0 1 7 .5h2a.5.5 0 0 1 0 1v.57c1.36.196 2.594.78 3.584 1.64l.012-.013.354-.354-.354-.353a.5.5 0 0 1 .707-.708l1.414 1.415a.5.5 0 1 1-.707.707l-.353-.354-.354.354-.013.012A7 7 0 1 1 7 2.071V1.5a.5.5 0 0 1-.5-.5M8 3a6 6 0 1 0 .001 12A6 6 0 0 0 8 3"/>
</svg>`,cancelIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
</svg>`,NEVER=Symbol("NEVER"),Show=defineComponent("Show",(props,$)=>{let flag=NEVER,lastComp;return useEffect("when changed [t6e02g]",()=>{const lastFlag=flag;flag=!!props.when?.(),logLevel>=2&&console.debug(`üí´ ${$.debugName} value:`,lastFlag,"‚úèÔ∏è",flag),!(!flag==!lastFlag&&lastFlag!==NEVER)&&untrack("update comp [t6e02l]",()=>{lastComp?.remove(),lastComp=void 0,flag?props.then&&(lastComp=h(ShowThen,{fn:()=>props.then(props.when)})):props.else&&(lastComp=h(ShowElse,{fn:props.else})),lastComp&&$.append(lastComp)})}),$}),ShowThen=defineComponent("ShowThen",(props,$)=>{const el=props.fn();return Array.isArray(el)?$.append(...el.map(expandSlots)):el&&$.append(expandSlots(el)),$}),ShowElse=defineComponent("ShowElse",(props,$)=>{const el=props.fn();return Array.isArray(el)?$.append(...el.map(expandSlots)):el&&$.append(expandSlots(el)),$});var Screen=(Screen2=>(Screen2.Menu="Menu",Screen2.New="New",Screen2.Game="Game",Screen2))(Screen||{});const uiStore=useState("uiStore",{hash:"",screen:"Menu",lockedCount:0,error:"",updateServiceWorker:void 0,confirm:void 0,isLocked(){return this.lockedCount>0},async lockWhile(name,fn){try{mutateState(name,"increment lockedCount [t62otg]",()=>{this.lockedCount++}),await fn()}catch(e){console.error(e),mutateState(name,"set error [t62otc]",()=>{this.error=e+""})}finally{mutateState(name,"decrement lockedCount [t62otj]",()=>{this.lockedCount--})}}});function onHashChange(){mutateState("onHashChange","set screen [t6c2f3]",()=>{switch(location.hash.slice(1)){case"new":uiStore.screen=Screen.New;break;case"game":uiStore.screen=Screen.Game;break;default:uiStore.screen=Screen.Menu}})}const message$2="_message_9mwd9_1",css$l={message:message$2},buttons="_buttons_s5so4_1",css$k={buttons},ButtonsComp=defineComponent("ButtonsComp",(props,$)=>($.append(jsx("div",{class:css$k.buttons,children:props.children})),$)),css$j={"dialog-body":"_dialog-body_13vuw_1"},DialogBodyComp=defineComponent("DialogBodyComp",(props,$)=>($.append(jsx("div",{class:css$j["dialog-body"],children:props.children})),$)),DialogComp=defineComponent("DialogComp",(props,$)=>{let dialogElem=useState("dialogElem",{ref:void 0});return $.append(jsx(Show,{when:props.isOpen,then:()=>jsx("dialog",{ref:it=>{mutateState($.debugName,"set dialog ref [t68s1j]",()=>{dialogElem.ref=it})},class:"dialog",onclose:e=>e.preventDefault(),children:props.children})})),useEffect("show dialog [t68hvv]",()=>{dialogElem.ref&&props.isOpen()&&!dialogElem.ref.open&&dialogElem.ref.showModal()}),$}),xSvg=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
  <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
</svg>`,icon="_icon_1s4rj_1",css$i={icon,"rotate-90-and-flip":"_rotate-90-and-flip_1s4rj_10"},IconComp=defineComponent("IconComp",(props,$)=>($.append(jsx("span",{ref:it=>it,class:()=>[css$i.icon,props.rotate90AndFlip&&css$i["rotate-90-and-flip"],typeof props.class=="function"?props.class():props.class],style:()=>({color:typeof props.color=="function"?props.color():props.color}),innerHTML:()=>(typeof props.icon=="function"?props.icon():props.icon).replace(' width="16"',"").replace(' height="16"',"")})),$)),DialogHeaderComp=defineComponent("DialogHeaderComp",(props,$)=>($.append(jsxs("div",{class:"dialog-header",children:[jsx("div",{class:"dialog-header-title",children:props.children}),jsx("button",{class:"dialog-header-close",title:"Z√°rd be",onclick:props.onClose,children:jsx(IconComp,{icon:xSvg})})]})),$)),errorIcon$1=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-octagon-fill" viewBox="0 0 16 16">
  <path d="M11.46.146A.5.5 0 0 0 11.107 0H4.893a.5.5 0 0 0-.353.146L.146 4.54A.5.5 0 0 0 0 4.893v6.214a.5.5 0 0 0 .146.353l4.394 4.394a.5.5 0 0 0 .353.146h6.214a.5.5 0 0 0 .353-.146l4.394-4.394a.5.5 0 0 0 .146-.353V4.893a.5.5 0 0 0-.146-.353zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
</svg>`,error="_error_2u4te_1",content$1="_content_2u4te_4",message$1="_message_2u4te_10",detail="_detail_2u4te_16",css$h={error,content:content$1,message:message$1,detail},ErrorComp=defineComponent("ErrorComp",(props,$)=>($.append(jsx(Show,{when:()=>props.error,then:()=>jsx("div",{class:css$h.error,children:jsxs("div",{class:css$h.content,children:[jsx(IconComp,{icon:errorIcon$1,color:"#f03"}),jsxs("div",{class:css$h.message,children:["Hiba t√∂rt√©nt!",jsx("div",{class:css$h.detail,children:()=>(props.error??"")+""})]})]})})})),$)),instanceOfAny=(object,constructors)=>constructors.some(c=>object instanceof c);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const transactionDoneMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(request){const promise=new Promise((resolve,reject)=>{const unlisten=()=>{request.removeEventListener("success",success),request.removeEventListener("error",error2)},success=()=>{resolve(wrap(request.result)),unlisten()},error2=()=>{reject(request.error),unlisten()};request.addEventListener("success",success),request.addEventListener("error",error2)});return reverseTransformCache.set(promise,request),promise}function cacheDonePromiseForTransaction(tx){if(transactionDoneMap.has(tx))return;const done=new Promise((resolve,reject)=>{const unlisten=()=>{tx.removeEventListener("complete",complete),tx.removeEventListener("error",error2),tx.removeEventListener("abort",error2)},complete=()=>{resolve(),unlisten()},error2=()=>{reject(tx.error||new DOMException("AbortError","AbortError")),unlisten()};tx.addEventListener("complete",complete),tx.addEventListener("error",error2),tx.addEventListener("abort",error2)});transactionDoneMap.set(tx,done)}let idbProxyTraps={get(target,prop,receiver){if(target instanceof IDBTransaction){if(prop==="done")return transactionDoneMap.get(target);if(prop==="store")return receiver.objectStoreNames[1]?void 0:receiver.objectStore(receiver.objectStoreNames[0])}return wrap(target[prop])},set(target,prop,value){return target[prop]=value,!0},has(target,prop){return target instanceof IDBTransaction&&(prop==="done"||prop==="store")?!0:prop in target}};function replaceTraps(callback){idbProxyTraps=callback(idbProxyTraps)}function wrapFunction(func){return getCursorAdvanceMethods().includes(func)?function(...args){return func.apply(unwrap(this),args),wrap(this.request)}:function(...args){return wrap(func.apply(unwrap(this),args))}}function transformCachableValue(value){return typeof value=="function"?wrapFunction(value):(value instanceof IDBTransaction&&cacheDonePromiseForTransaction(value),instanceOfAny(value,getIdbProxyableTypes())?new Proxy(value,idbProxyTraps):value)}function wrap(value){if(value instanceof IDBRequest)return promisifyRequest(value);if(transformCache.has(value))return transformCache.get(value);const newValue=transformCachableValue(value);return newValue!==value&&(transformCache.set(value,newValue),reverseTransformCache.set(newValue,value)),newValue}const unwrap=value=>reverseTransformCache.get(value);function openDB(name,version2,{blocked,upgrade,blocking,terminated}={}){const request=indexedDB.open(name,version2),openPromise=wrap(request);return upgrade&&request.addEventListener("upgradeneeded",event=>{upgrade(wrap(request.result),event.oldVersion,event.newVersion,wrap(request.transaction),event)}),blocked&&request.addEventListener("blocked",event=>blocked(event.oldVersion,event.newVersion,event)),openPromise.then(db=>{terminated&&db.addEventListener("close",()=>terminated()),blocking&&db.addEventListener("versionchange",event=>blocking(event.oldVersion,event.newVersion,event))}).catch(()=>{}),openPromise}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(target,prop){if(!(target instanceof IDBDatabase&&!(prop in target)&&typeof prop=="string"))return;if(cachedMethods.get(prop))return cachedMethods.get(prop);const targetFuncName=prop.replace(/FromIndex$/,""),useIndex=prop!==targetFuncName,isWrite=writeMethods.includes(targetFuncName);if(!(targetFuncName in(useIndex?IDBIndex:IDBObjectStore).prototype)||!(isWrite||readMethods.includes(targetFuncName)))return;const method=async function(storeName,...args){const tx=this.transaction(storeName,isWrite?"readwrite":"readonly");let target2=tx.store;return useIndex&&(target2=target2.index(args.shift())),(await Promise.all([target2[targetFuncName](...args),isWrite&&tx.done]))[0]};return cachedMethods.set(prop,method),method}replaceTraps(oldTraps=>({...oldTraps,get:(target,prop,receiver)=>getMethod(target,prop)||oldTraps.get(target,prop,receiver),has:(target,prop)=>!!getMethod(target,prop)||oldTraps.has(target,prop)}));const advanceMethodProps=["continue","continuePrimaryKey","advance"],methodMap={},advanceResults=new WeakMap,ittrProxiedCursorToOriginalProxy=new WeakMap,cursorIteratorTraps={get(target,prop){if(!advanceMethodProps.includes(prop))return target[prop];let cachedFunc=methodMap[prop];return cachedFunc||(cachedFunc=methodMap[prop]=function(...args){advanceResults.set(this,ittrProxiedCursorToOriginalProxy.get(this)[prop](...args))}),cachedFunc}};async function*iterate(...args){let cursor=this;if(cursor instanceof IDBCursor||(cursor=await cursor.openCursor(...args)),!cursor)return;cursor=cursor;const proxiedCursor=new Proxy(cursor,cursorIteratorTraps);for(ittrProxiedCursorToOriginalProxy.set(proxiedCursor,cursor),reverseTransformCache.set(proxiedCursor,unwrap(cursor));cursor;)yield proxiedCursor,cursor=await(advanceResults.get(proxiedCursor)||cursor.continue()),advanceResults.delete(proxiedCursor)}function isIteratorProp(target,prop){return prop===Symbol.asyncIterator&&instanceOfAny(target,[IDBIndex,IDBObjectStore,IDBCursor])||prop==="iterate"&&instanceOfAny(target,[IDBIndex,IDBObjectStore])}replaceTraps(oldTraps=>({...oldTraps,get(target,prop,receiver){return isIteratorProp(target,prop)?iterate:oldTraps.get(target,prop,receiver)},has(target,prop){return isIteratorProp(target,prop)||oldTraps.has(target,prop)}}));function openSkrabliDb(){return setTimeout(()=>{navigator.storage.persist()}),openDB("skrabli-db",2,{upgrade(database,oldVersion,newVersion,transaction,event){oldVersion<1&&database.createObjectStore("validity"),oldVersion<2&&database.createObjectStore("games",{keyPath:"id"}).createIndex("byTimestamp","timestamp")}})}var LocalStorageKey=(LocalStorageKey2=>(LocalStorageKey2._SavedGame="game",LocalStorageKey2.AllWordsValidityUpdated="AllWordsValidityUpdated",LocalStorageKey2.LastGameId="LastGameId",LocalStorageKey2))(LocalStorageKey||{});async function deleteGameFromDb(gameId){let db;try{db=await openSkrabliDb(),await db.delete("games",gameId);try{localStorage[LocalStorageKey.LastGameId]===gameId&&localStorage.removeItem(LocalStorageKey.LastGameId)}catch{}}catch(e){console.error("[ryazbw]",e)}finally{db?.close()}}function upgradeGame(game){if("version"in game||(game={...game,version:2,playerInfos:game.playerInfos.map(playerInfo=>({...playerInfo,hints:3}))}),"version"in game)switch(game.version){case 2:return game}throw new Error("[ryly99] Could not upgrade game.")}async function loadGame(id){let db;try{db=await openSkrabliDb();const game=await db.get("games",id);return game?upgradeGame(game):void 0}catch(e){console.error("[ry5f5h]",e)}finally{db?.close()}}async function loadContinuableGame(){const gameId=localStorage[LocalStorageKey.LastGameId];if(gameId){const game=await loadGame(gameId);if(!game)throw new Error("[ry5mal] Game not found!");return game}}function navigate(target){location.hash="#"+target,onHashChange()}const BOARD_SIZE=15,BINGO_SCORE=50,HAND_SIZE=7;var Mode=(Mode2=>(Mode2.NotStarted="NotStarted",Mode2.PlaceTile="PlaceTile",Mode2.ReplaceTiles="ReplaceTiles",Mode2.Ended="Ended",Mode2))(Mode||{});function useMemo(name,getValue){const $=activeComps.at(-1),memo=useState(`${name} ‚Üí memo`,{value:void 0,hasChanged:{}});let lastHasChanged,proxyTracker;return()=>{if(memo.hasChanged!==lastHasChanged){lastHasChanged=memo.hasChanged;try{proxyTracker={name,chain:getEffectChain(name),rerun:()=>{mutateState($?.debugName??"global",`${name} set memo changed [t6e6lq]`,()=>{memo.hasChanged={}}),proxyTracker.rerun=void 0}},activeEffects.push(proxyTracker),mutateState($?.debugName??"global",`${name} set memo value [t6e550]`,()=>{memo.value=getValue()})}finally{activeEffects.pop()}}return memo.value}}function disownTiles(board2){for(const field of board2)field.tile&&(field.tile.isOwned?(field.tile.isOwned=null,field.tile.isLast=!0):field.tile.isLast&&(field.tile.isLast=null))}var FieldKind=(FieldKind2=>(FieldKind2.Normal="-",FieldKind2.StartNoBonus="S",FieldKind2.Start="s",FieldKind2.DoubleLetter="l",FieldKind2.TripleLetter="L",FieldKind2.DoubleWord="w",FieldKind2.TripleWord="W",FieldKind2))(FieldKind||{});function findStartFieldIndex(board2){for(let fieldIndex=0;fieldIndex<board2.length;fieldIndex++){const kind=board2[fieldIndex].kind;if(kind===FieldKind.Start||kind===FieldKind.StartNoBonus)return fieldIndex}throw new Error("[rycmdu] Start field not found!")}var AiLevel=(AiLevel2=>(AiLevel2[AiLevel2.Human=0]="Human",AiLevel2[AiLevel2.Easy=1]="Easy",AiLevel2[AiLevel2.Medium=2]="Medium",AiLevel2[AiLevel2.Hard=3]="Hard",AiLevel2[AiLevel2.VeryHard=4]="VeryHard",AiLevel2[AiLevel2.Ultimate=5]="Ultimate",AiLevel2))(AiLevel||{});function isString(o){return typeof o=="string"}function listed(arr){if(arr.length===0)return"";if(arr.length===1)return arr[0];const last=arr.at(-1);return arr.slice(0,-1).join(", ")+" √©s "+last}function gameNameFromPlayerInfos(playerInfos){const humans=playerInfos.filter(p=>p.aiLevel===AiLevel.Human),easyBots=playerInfos.filter(p=>p.aiLevel===AiLevel.Easy),mediumBots=playerInfos.filter(p=>p.aiLevel===AiLevel.Medium),hardBots=playerInfos.filter(p=>p.aiLevel===AiLevel.Hard),veryHardBots=playerInfos.filter(p=>p.aiLevel===AiLevel.VeryHard),ultimateBots=playerInfos.filter(p=>p.aiLevel===AiLevel.Ultimate),botsStringBase=[easyBots.length>0&&`${easyBots.length} k√∂nny≈±`,mediumBots.length>0&&`${mediumBots.length} k√∂zepes`,hardBots.length>0&&`${hardBots.length} neh√©z`,veryHardBots.length>0&&`${hardBots.length} durva`,ultimateBots.length>0&&`${ultimateBots.length} v√©gs≈ë`].filter(isString),botsString=botsStringBase.length===0?"":" "+listed(botsStringBase)+" robot ellen";return listed(humans.map(human=>human.name))+botsString}var Direction=(Direction2=>(Direction2[Direction2.Horizontal=0]="Horizontal",Direction2[Direction2.Vertical=1]="Vertical",Direction2))(Direction||{});function getFieldIndexOffset(direction,boardSize){return direction===Direction.Horizontal?1:boardSize.width}function getColumnIndex(fieldIndex,boardSize){return fieldIndex%boardSize.width}function getColumnLine(board2,boardSize,columnIndex){const column=[];for(let rowIndex=0;rowIndex<boardSize.height;rowIndex++)column.push(board2[rowIndex*boardSize.width+columnIndex]);return column}function getRowIndex(fieldIndex,boardSize){return Math.floor(fieldIndex/boardSize.width)}function getRowLine(board2,boardSize,lineIndex){const firstFieldIndex=lineIndex*boardSize.width;return board2.slice(firstFieldIndex,firstFieldIndex+boardSize.width)}function getWordFromLine(line,lineIndex){const word=[];let index=lineIndex,startLineIndex=lineIndex,endLineIndex=lineIndex;for(;index>=0;){const field=line[index];if(!field.tile)break;word.unshift(field),startLineIndex=index,index--}for(index=lineIndex+1;index<line.length;){const field=line[index];if(!field||!field.tile)break;word.push(field),endLineIndex=index,index++}return{word:word.length>1?word:[],startLineIndex,endLineIndex}}function getWordAt(board2,boardSize,fieldIndex,direction){return direction===Direction.Horizontal?getWordFromLine(getRowLine(board2,boardSize,getRowIndex(fieldIndex,boardSize)),getColumnIndex(fieldIndex,boardSize)):getWordFromLine(getColumnLine(board2,boardSize,getColumnIndex(fieldIndex,boardSize)),getRowIndex(fieldIndex,boardSize))}function theOtherDirection(d){return d===Direction.Horizontal?Direction.Vertical:Direction.Horizontal}function getAllOwnedWords(board2,boardSize,{firstFieldIndex,lastFieldIndex,direction}){const words=[];if(firstFieldIndex!=null&&lastFieldIndex!=null&&direction!=null){words.push(getWordAt(board2,boardSize,firstFieldIndex,direction).word);let fieldIndex=firstFieldIndex,field=board2[fieldIndex];for(;field&&field.tile&&(field.tile.isOwned&&words.push(getWordAt(board2,boardSize,fieldIndex,theOtherDirection(direction)).word),fieldIndex+=getFieldIndexOffset(direction,boardSize),!(fieldIndex>lastFieldIndex));)field=board2[fieldIndex]}return words.filter(_=>_.length>0)}function getHandTileCount(hand2){return(hand2||[]).reduce((sum,tile2)=>sum+(tile2==null?0:1),0)}function getHandValue(hand2){return hand2.reduce((sum,tile2)=>sum+(tile2?tile2.score:0),0)}function getMoveByAiLevel(movesUnsorted,aiLevel){if(movesUnsorted.length===0)throw new Error("[rytggu] No moves.");if(movesUnsorted.length===1)return movesUnsorted[0];const moves=movesUnsorted.slice().sort((a,b)=>b.score-a.score||b.handIndices.length-a.handIndices.length),max=moves[0].score,min=moves[moves.length-1].score,range2=max-min;switch(aiLevel){case AiLevel.Easy:return moves.find(move=>move.score<min+range2*.1);case AiLevel.Medium:return moves.find(move=>move.score<min+range2*.25);case AiLevel.Hard:return moves.find(move=>move.score<min+range2*.5);case AiLevel.VeryHard:return moves.find(move=>move.score<min+range2*.75);case AiLevel.Ultimate:return moves[0]}throw new Error("[rytgn0]")}var MoveError=(MoveError2=>(MoveError2[MoveError2.NoTile=0]="NoTile",MoveError2[MoveError2.OneTile=1]="OneTile",MoveError2[MoveError2.NoDirection=2]="NoDirection",MoveError2[MoveError2.NoStart=3]="NoStart",MoveError2[MoveError2.NoConnection=4]="NoConnection",MoveError2))(MoveError||{});function getMoveErrors(board2,startFieldIndex,allOwnedWords,wordInfo){const errors2=new Set,{firstFieldIndex,lastFieldIndex,direction}=wordInfo;if(firstFieldIndex==null&&errors2.add(MoveError.NoTile),errors2.size===0&&(firstFieldIndex===lastFieldIndex&&errors2.add(MoveError.OneTile),errors2.size===0&&(direction==null&&errors2.add(MoveError.NoDirection),errors2.size===0))){let touchesStart=!1,touchesUnowned=!1;for(const word of allOwnedWords)for(const field of word)(field.kind===FieldKind.Start||field.kind===FieldKind.StartNoBonus)&&(touchesStart=!0),field.tile&&!field.tile.isOwned&&(touchesUnowned=!0);board2[startFieldIndex].tile==null?errors2.add(MoveError.NoStart):!touchesUnowned&&!touchesStart&&errors2.add(MoveError.NoConnection)}return Array.from(errors2)}function getWordScore(word){let wordMulti=1;return word.reduce((sum,field)=>{const tile2=field.tile;let tileScore=0;if(tile2&&(tileScore=tile2.score,tile2.isOwned))switch(field.kind){case FieldKind.DoubleLetter:tileScore*=2;break;case FieldKind.TripleLetter:tileScore*=3;break;case FieldKind.Start:case FieldKind.DoubleWord:wordMulti*=2;break;case FieldKind.TripleWord:wordMulti*=3;break}return sum+tileScore},0)*wordMulti}function getMoveScore(allOwnedWords,isBingo){let score=0;for(const word of allOwnedWords)score+=getWordScore(word);return isBingo&&(score+=BINGO_SCORE),score}function isThereAGap(board2,boardSize,startFieldIndex,endFieldIndex,direction){for(let fieldIndex=startFieldIndex;fieldIndex<=endFieldIndex;fieldIndex+=getFieldIndexOffset(direction,boardSize))if(!board2[fieldIndex]?.tile)return!0;return!1}function getWordInfo(board2,boardSize){let firstFieldIndex=null,lastFieldIndex=null,colIndex=null,rowIndex=null,direction=null;for(let fieldIndex=0;fieldIndex<board2.length;fieldIndex++){const field=board2[fieldIndex];if(field.tile&&field.tile.isOwned)if(colIndex==null)firstFieldIndex=fieldIndex,lastFieldIndex=fieldIndex,colIndex=getColumnIndex(fieldIndex,boardSize),rowIndex=getRowIndex(fieldIndex,boardSize);else{const newColIndex=getColumnIndex(fieldIndex,boardSize),newRowIndex=getRowIndex(fieldIndex,boardSize);lastFieldIndex===firstFieldIndex?colIndex===newColIndex?direction=Direction.Vertical:rowIndex===newRowIndex&&(direction=Direction.Horizontal):(direction===Direction.Vertical&&colIndex!==newColIndex||direction===Direction.Horizontal&&rowIndex!==newRowIndex)&&(direction=null),colIndex=newColIndex,rowIndex=newRowIndex,lastFieldIndex=fieldIndex}}if(firstFieldIndex!=null){const horizontal=getWordAt(board2,boardSize,firstFieldIndex,Direction.Horizontal),vertical=getWordAt(board2,boardSize,firstFieldIndex,Direction.Vertical);firstFieldIndex===lastFieldIndex&&(horizontal.word.length?direction=Direction.Horizontal:vertical.word.length&&(direction=Direction.Vertical)),direction===Direction.Horizontal?(firstFieldIndex=Math.min(firstFieldIndex,getRowIndex(firstFieldIndex,boardSize)*boardSize.width+horizontal.startLineIndex),lastFieldIndex=Math.max(lastFieldIndex,getRowIndex(firstFieldIndex,boardSize)*boardSize.width+horizontal.endLineIndex)):direction===Direction.Vertical&&(firstFieldIndex=Math.min(firstFieldIndex,vertical.startLineIndex*boardSize.width+getColumnIndex(firstFieldIndex,boardSize)),lastFieldIndex=Math.max(lastFieldIndex,vertical.endLineIndex*boardSize.width+getColumnIndex(firstFieldIndex,boardSize)))}return firstFieldIndex!=null&&lastFieldIndex!=null&&direction!=null&&isThereAGap(board2,boardSize,firstFieldIndex,lastFieldIndex,direction)&&(direction=null),{firstFieldIndex,lastFieldIndex,direction}}function getWordString(word){return word.map(_=>_.tile.letter).join("")}function jsonClone$1(o){return JSON.parse(JSON.stringify(o))}function WorkerWrapper(options2){return new Worker(""+new URL("hints.worker-ZYEEPeH5.js",import.meta.url).href,{name:options2?.name})}async function loadAllWordsValidityFromDb(){let db;try{db=await openSkrabliDb();const validity=await db.get("validity","it");return validity||(console.warn("[rxw91t] No validity in DB."),{validWords:[],invalidWords:[]})}catch(e){return console.error("[rxw8y5]",e),{validWords:[],invalidWords:[]}}finally{db?.close()}}async function storeAllWordsValidityToDb(validity){let db;try{db=await openSkrabliDb(),db.put("validity",validity,"it")}catch(e){console.error("[rxw93m]",e)}finally{db?.close()}}let currentLoad;function loadAllWordsValidityFromServer(){return currentLoad||(currentLoad=load().finally(()=>{currentLoad=void 0}))}async function load(){const response=await fetch("https://api.github.com/gists/41d9c22f86c827648ba3c0d3dc7b3e01");if(!response.ok)throw new Error(`[rxw9wy] Request error: ${response.status} ${response.statusText}`);const json=await response.json();await storeAllWordsValidityToDb({validWords:json.files["words.txt"].content.split(/\n/g).filter(Boolean),invalidWords:[]})}async function getKnownWords(){let validity=await loadAllWordsValidityFromDb();return validity.validWords.length===0&&(await loadAllWordsValidityFromServer(),validity=await loadAllWordsValidityFromDb()),validity.validWords}let worker=null;async function loadHints({hand:hand2,board:board2,boardSize}){try{const words=await getKnownWords();return await new Promise((resolve,reject)=>{worker&&worker.terminate(),worker=new WorkerWrapper,worker.addEventListener("message",event=>{resolve(event.data)}),worker.addEventListener("error",event=>{reject(event.message)}),worker.postMessage({hand:hand2,board:board2,boardSize,words})})}finally{worker?.terminate(),worker=null}}function range(n){return[...Array(n).keys()]}async function storeGameToDb(game){game=jsonClone$1(game),game.timestamp=Date.now();let db;try{db=await openSkrabliDb(),await db.put("games",game),localStorage[LocalStorageKey.LastGameId]=game.id}catch(e){console.error("[ry3w5e]",e)}finally{db?.close()}}const MAX_SKIP_PER_PLAYER=2,DEFAULT_GAME_STORE={version:2,id:crypto.randomUUID(),name:"",playerInfos:[],timestamp:Date.now(),states:[]},gameStore=useState("gameStore",{...jsonClone$1(DEFAULT_GAME_STORE),getStarted(){return gameStore.states||console.log("[t68mry] gameStore:",JSON.stringify(gameStore)),gameStore.states.length>0},getState(){return gameStore.states.at(-1)??{bag:[],board:[],boardSize:{height:0,width:0},fieldIndex:null,handIndex:null,handIndicesToReplace:[],hands:[],mode:Mode.NotStarted,playerIndex:null,playerScores:[],skipCount:null,startingHandCount:null}},getPlayerInfo(){return gameStore.playerInfos.at(gameStore.getState().playerIndex)},getPlayerScore(){return gameStore.getState().playerScores.at(gameStore.getState().playerIndex)},getWordInfo:useMemo("getWordInfo",()=>getWordInfo(gameStore.getState().board,gameStore.getState().boardSize)),getAllOwnedWords:useMemo("getAllOwnedWords",()=>getAllOwnedWords(gameStore.getState().board,gameStore.getState().boardSize,gameStore.getWordInfo())),getAllOwnedWordStrings:useMemo("getAllOwnedWordStrings",()=>gameStore.getAllOwnedWords().map(word=>getWordString(word))),getHand(){const playerIndex=gameStore.getState().playerIndex;return playerIndex==null?null:gameStore.getState().hands[playerIndex]},getHandTile(){const hand2=gameStore.getHand(),handIndex=gameStore.getState().handIndex;return hand2&&handIndex!=null?hand2[handIndex]:null},getField(){const fieldIndex=gameStore.getState().fieldIndex;return fieldIndex==null?null:gameStore.getState().board[fieldIndex]},getTile(){return gameStore.getField()?.tile??null},getStartFieldIndex:useMemo("getStartFieldIndex",()=>findStartFieldIndex(gameStore.getState().board)),getMoveErrors:useMemo("getMoveErrors",()=>getMoveErrors(gameStore.getState().board,gameStore.getStartFieldIndex(),gameStore.getAllOwnedWords(),gameStore.getWordInfo())),getMoveScore:useMemo("getMoveScore",()=>getMoveScore(gameStore.getAllOwnedWords(),gameStore.getIsBingo())),getHandCount(){return(gameStore.getHand()??[]).reduce((sum,tile2)=>sum+(tile2==null?0:1),0)},getIsBingo(){return gameStore.getState().startingHandCount===7&&gameStore.getHandCount()===0},getEmptyHandBonus(){return gameStore.getState().hands.reduce((sum,hand2)=>sum+getHandValue(hand2),0)},getPlayerBonuses(){return gameStore.getState().hands.map(hand2=>hand2.filter(it=>it==null).length===7?gameStore.getEmptyHandBonus():-getHandValue(hand2))},getPlacedValidAndInvalidWords:useMemo("getPlacedValidAndInvalidWords",()=>{const state=gameStore.getState(),tile2=gameStore.getTile();return state.fieldIndex==null||!tile2||tile2.isOwned?void 0:{valid:[getWordAt(state.board,state.boardSize,state.fieldIndex,Direction.Horizontal).word,getWordAt(state.board,state.boardSize,state.fieldIndex,Direction.Vertical).word].filter(word=>word.length>1),invalid:[]}}),getWinners(){if(gameStore.getState().mode!==Mode.Ended)return[];let winningScore=-1/0,winners=[];for(let playerIndex=0;playerIndex<gameStore.playerInfos.length;playerIndex++)gameStore.getState().playerScores[playerIndex]>winningScore?(winningScore=gameStore.getState().playerScores[playerIndex],winners=[playerIndex]):gameStore.getState().playerScores[playerIndex]===winningScore&&winners.push(playerIndex);return winners},getIsGameDrawn(){return gameStore.playerInfos.length===gameStore.getWinners().length},getWinnersNames(){const winners=gameStore.getWinners();if(winners.length===0)return"";const winnerNames=winners.map(playerIndex=>gameStore.playerInfos[playerIndex].name),last=winnerNames[winnerNames.length-1],rest=winnerNames.slice(0,winnerNames.length-1);return rest.length?`${rest.join(", ")} √©s ${last}`:last},getCanSwap(){return gameStore.getState().bag.length>=HAND_SIZE},collectTiles(){mutateState("gameStore","collectTiles [5d9fb5]",()=>{const tiles2=[];for(const field of gameStore.getState().board)if(field.tile&&field.tile.isOwned){const tile2=field.tile;field.tile=null,tiles2.push(tile2),tile2.isJoker&&(tile2.letter=" ")}const hand2=gameStore.getState().hands[gameStore.getState().playerIndex];for(let i=0;i<hand2.length;i++)hand2[i]==null&&(hand2[i]=tiles2.shift()||null)})},disownTiles(){mutateState("gameStore","disownTiles [d8dc08]",()=>{disownTiles(gameStore.getState().board)})},fillHand(){const hand2=gameStore.getState().hands[gameStore.getState().playerIndex],count=Math.min(gameStore.getState().bag.length,hand2.length-getHandTileCount(hand2)),tiles2=[];mutateState("gameStore","grab tiles [95be12]",()=>{for(let i=0;i<count;i++){const tile2=gameStore.getState().bag.splice(Math.floor(Math.random()*gameStore.getState().bag.length),1)[0];tile2.isOwned=!0,tiles2.push(tile2)}}),mutateState("gameStore","fill hand [e16ac4]",()=>{const newHand=gameStore.getState().hands[gameStore.getState().playerIndex]=hand2.map(tile2=>tile2||tiles2.shift()||null);gameStore.getState().startingHandCount=getHandTileCount(newHand)})},nextPlayer(){mutateState("gameStore","nextPlayer [500255]",()=>{const state=gameStore.getState();state.playerIndex=state.playerIndex==null?0:state.playerIndex+1,state.playerIndex>=gameStore.playerInfos.length&&(state.playerIndex=0),state.fieldIndex=null,state.handIndex=null,state.hintUsed=null})},score(){mutateState("gameStore","score [8b76e2]",()=>{const state=gameStore.getState();state.playerScores[state.playerIndex]+=gameStore.getMoveScore()})},setJokerLetter(letter){mutateState("gameStore","setJokerLetter [52bd18]",()=>{gameStore.getState().board[gameStore.getState().fieldIndex].tile.letter=letter,gameStore.getState().fieldIndex=null})},setMode(mode){mutateState("gameStore","setMode [7c7dd4]",()=>{mode!==gameStore.getState().mode&&(gameStore.getState().fieldIndex=null,gameStore.getState().handIndex=null),gameStore.getState().mode=mode})},swapHandAndBoard(fieldIndex,handIndex){mutateState("gameStore","swapHandAndBoard [1d5228]",()=>{const state=gameStore.getState(),hand2=gameStore.getHand();if(!hand2)return;const tileOnBoard=state.board[fieldIndex].tile,tileInHand=hand2[handIndex];state.fieldIndex=tileInHand&&tileInHand.isJoker?fieldIndex:null,state.handIndex=null,state.board[fieldIndex].tile=tileInHand,hand2[handIndex]=tileOnBoard,tileOnBoard&&tileOnBoard.isJoker&&(tileOnBoard.letter=" ")})},swapHands(handIndexA,handIndexB){mutateState("gameStore","swapHands [780fe2]",()=>{const hand2=gameStore.getState().hands[gameStore.getState().playerIndex],tileA=hand2[handIndexA],tileB=hand2[handIndexB];gameStore.getState().handIndex=null,hand2[handIndexA]=tileB,hand2[handIndexB]=tileA})},swapTiles(fieldIndexA,fieldIndexB){mutateState("gameStore","swapTiles [ad0d48]",()=>{const fieldATile=gameStore.getState().board[fieldIndexA].tile,fieldBTile=gameStore.getState().board[fieldIndexB].tile;gameStore.getState().fieldIndex=null,gameStore.getState().board[fieldIndexA].tile=fieldBTile,gameStore.getState().board[fieldIndexB].tile=fieldATile})},toggleHandIndexToReplace(handIndex){mutateState("gameStore","toggleHandIndexToReplace [edac8b]",()=>{gameStore.getState().handIndicesToReplace[handIndex]=!gameStore.getState().handIndicesToReplace[handIndex]})},removeTilesToReplaceFromHand(){mutateState("gameStore","removeTilesToReplaceFromHand [17ff98]",()=>{const hand2=gameStore.getState().hands[gameStore.getState().playerIndex];gameStore.getState().hands[gameStore.getState().playerIndex]=hand2.map((tile2,index)=>gameStore.getState().handIndicesToReplace[index]?null:tile2)})},deselectTilesToReplace(){mutateState("gameStore","deselectTilesToReplace [154336]",()=>{gameStore.getState().handIndicesToReplace.fill(!1)})},addTilesToBag(tiles2){mutateState("gameStore","addTilesToBag [e1aa28]",()=>{gameStore.getState().bag.push(...tiles2)})},incrementSkipCount(){mutateState("gameStore","incrementSkipCount [679b4b]",()=>{gameStore.getState().skipCount=(gameStore.getState().skipCount||0)+1})},resetSkipCount(){mutateState("gameStore","resetSkipCount [6071ce]",()=>{gameStore.getState().skipCount=0})},scoreBonuses(){mutateState("gameStore","scoreBonuses [1ea10a]",()=>{for(let playerIndex=0;playerIndex<gameStore.playerInfos.length;playerIndex++)gameStore.getState().playerScores[playerIndex]+=gameStore.getPlayerBonuses()[playerIndex]})},startGame(){mutateState("gameStore","set game name [773808]",()=>{gameStore.name=gameNameFromPlayerInfos(gameStore.playerInfos)});for(let i=0;i<gameStore.playerInfos.length;i++)gameStore.nextPlayer(),gameStore.fillHand();mutateState("gameStore","startGame [395e48]",()=>{gameStore.getState().mode=Mode.PlaceTile}),gameStore.nextPlayer(),gameStore.beginTurn()},finishMove(){gameStore.score(),gameStore.disownTiles(),gameStore.resetSkipCount(),gameStore.getState().bag.length||gameStore.getHandCount()?(gameStore.fillHand(),gameStore.nextPlayer(),gameStore.beginTurn()):gameStore.endGame()},async beginTurn(){gameStore.getPlayerInfo().aiLevel===AiLevel.Human?(gameStore.setUndoPoint(),gameStore.saveGame()):await uiStore.lockWhile("gameStore aiMove [t6c2dn]",gameStore.aiMove)},async aiMove(){const movesHV=await loadHints({board:jsonClone$1(gameStore.getState().board),boardSize:jsonClone$1(gameStore.getState().boardSize),hand:jsonClone$1(gameStore.getHand())}),moves=[...movesHV.horizontal,...movesHV.vertical];if(moves.length===0)gameStore.getCanSwap()?(mutateState("gameStore","aiMove set handIndicesToReplace [aa4a38]",()=>{gameStore.getState().handIndicesToReplace=range(HAND_SIZE).map(()=>!0)}),gameStore.swap()):gameStore.skip();else{const move=getMoveByAiLevel(moves,gameStore.getPlayerInfo().aiLevel);mutateState("gameStore","aiMove make move [be31b8]",()=>{gameStore.getState().board=move.board,gameStore.getState().hands[gameStore.getState().playerIndex]=move.hand}),gameStore.finishMove()}},selectHand(handIndexToSelect){const state=gameStore.getState();if(state.mode===Mode.ReplaceTiles)gameStore.toggleHandIndexToReplace(handIndexToSelect);else{const field=state.fieldIndex!=null?state.board[state.fieldIndex]:null,tile2=field&&field.tile;field&&tile2&&tile2.isOwned?gameStore.swapHandAndBoard(state.fieldIndex,handIndexToSelect):state.handIndex===handIndexToSelect?mutateState("gameStore","selectHand null [a5a3c8]",()=>{state.handIndex=null}):state.handIndex==null?mutateState("gameStore","selectHand N [d4dad8]",()=>{state.handIndex=state.hands[state.playerIndex][handIndexToSelect]?handIndexToSelect:null}):gameStore.swapHands(state.handIndex,handIndexToSelect)}},swap(){const tilesToReplace=gameStore.getHand().filter((tile2,aHandIndex)=>gameStore.getState().handIndicesToReplace[aHandIndex]);gameStore.removeTilesToReplaceFromHand(),gameStore.deselectTilesToReplace(),gameStore.fillHand(),gameStore.addTilesToBag(tilesToReplace),gameStore.resetSkipCount(),gameStore.setMode(Mode.PlaceTile),gameStore.nextPlayer(),gameStore.beginTurn()},skip(){gameStore.incrementSkipCount(),(gameStore.getState().skipCount||0)>=gameStore.playerInfos.length*MAX_SKIP_PER_PLAYER?gameStore.endGame():(gameStore.collectTiles(),gameStore.nextPlayer(),gameStore.beginTurn())},endGame(){gameStore.scoreBonuses(),gameStore.setMode(Mode.Ended),gameStore.setUndoPoint(),gameStore.saveGame()},setUndoPoint(){mutateState("gameStore","setUndoPoint [419458]",()=>{gameStore.states.push(jsonClone$1(gameStore.getState()))})},async saveGame(){await uiStore.lockWhile("gameStore saveGame [t6c2dy]",async()=>{await storeGameToDb(gameStore),uiStore.updateServiceWorker&&await uiStore.updateServiceWorker()})},async loadGame(id){await uiStore.lockWhile("gameStore loadGame [t6c2e2]",async()=>{const game=await loadGame(id);if(!game)throw new Error("[ry5ln7] Game not found!");mutateState("gameStore","apply loaded game [556b1b]",()=>{Object.assign(gameStore,game)})})}}),For=defineComponent("For",(props,$)=>{let emptyElem;const key__itemData=new Map;return useEffect("update items [t6e00f]",()=>{const items=props.each()??[],redundantKeys=new Set(key__itemData.keys()),keys=[];for(let index=0,n=items.length;index<n;index++){const item=items[index],key=props.getKey?.(item,index)??index;keys.push(key),redundantKeys.delete(key)}redundantKeys.size&&(logLevel>=3&&console.debug(`üßπ Redundant keys ${$.debugName}:`,redundantKeys),untrack("redundant [t6e01i]",()=>{for(const key of redundantKeys){const data=key__itemData.get(key);data&&data.elem.remove(),key__itemData.delete(key)}})),items.length===0?!emptyElem&&props.empty&&(emptyElem=h(ForEmpty,{debugName:props.debugName,empty:props.empty}),$.append(emptyElem)):emptyElem&&(emptyElem.remove(),emptyElem=void 0),untrack("update [t6e01d]",()=>{let lastElem;mutateState($.debugName,"update items [t5im53]",()=>{for(let index=0,n=items.length;index<n;index++){const item=items[index],key=keys[index];let itemData=key__itemData.get(key);if(itemData)itemData.state.index=index,itemData.state.item=item;else{const state=useState(`${$.debugName} ‚Üí itemState`,{index,item});itemData={elem:h(ForItem,{debugName:props.debugName,state,render:props.render}),state},key__itemData.set(key,itemData)}lastElem?lastElem.nextElementSibling!==itemData.elem&&lastElem.after(itemData.elem):itemData.elem.parentElement?.firstElementChild!==itemData.elem&&$.prepend(itemData.elem),lastElem=itemData.elem}})})}),$}),ForItem=defineComponent("ForItem",({state,render},$)=>{const el=render(state);return Array.isArray(el)?$.append(...el.map(expandSlots)):$.append(expandSlots(el)),$}),ForEmpty=defineComponent("ForEmpty",(props,$)=>{const el=props.empty();return Array.isArray(el)?$.append(...el.map(expandSlots)):$.append(expandSlots(el)),$}),board="_board_4ohr1_1",css$g={board,"is-smaller":"_is-smaller_4ohr1_17","board-field":"_board-field_4ohr1_22","is-start":"_is-start_4ohr1_49","is-double-word":"_is-double-word_4ohr1_50","is-start-no-bonus":"_is-start-no-bonus_4ohr1_54","is-triple-word":"_is-triple-word_4ohr1_58","is-double-letter":"_is-double-letter_4ohr1_62","is-triple-letter":"_is-triple-letter_4ohr1_66","is-selected":"_is-selected_4ohr1_70"},tile="_tile_1aznk_1",css$f={tile,"is-owned":"_is-owned_1aznk_15","is-last":"_is-last_1aznk_18","is-joker":"_is-joker_1aznk_22","tile-letter":"_tile-letter_1aznk_22","tile-score":"_tile-score_1aznk_31"},TileComp=defineComponent("TileComp",(props,$)=>($.append(jsxs("div",{class:()=>{const tile2=props.getTile();return[css$f.tile,!props.getNeverOwned?.()&&tile2?.isOwned&&css$f["is-owned"],tile2?.isJoker&&css$f["is-joker"],tile2?.isLast&&css$f["is-last"]]},children:[jsx("div",{class:css$f["tile-letter"],children:()=>props.getTile()?.letter}),jsx("div",{class:css$f["tile-score"],children:()=>(props.getTile()?.score??"")+""})]})),$)),BoardComp=defineComponent("BoardComp",(props,$)=>{const getBoard=()=>props.getBoardInfo?.().board??gameStore.getState().board,getBoardSize=()=>props.getBoardInfo?.().boardSize??gameStore.getState().boardSize,getAspectRatio=()=>{const boardSize=getBoardSize();return boardSize.width/boardSize.height};function fieldKindToString(fieldKind){switch(fieldKind){case FieldKind.Normal:return"";case FieldKind.DoubleLetter:return`2√ó
Bet≈±`;case FieldKind.DoubleWord:return`2√ó
Sz√≥`;case FieldKind.Start:case FieldKind.StartNoBonus:return"Start";case FieldKind.TripleLetter:return`3√ó
Bet≈±`;case FieldKind.TripleWord:return`3√ó
Sz√≥`;default:throw new Error(`[ppp079]: ${fieldKind}`)}}function onFieldClicked(fieldIndex){const state=gameStore.getState();if(state.mode!==Mode.PlaceTile)return;const fieldToSelect=state.board[fieldIndex],field=gameStore.getField();field!=null&&field.tile&&field.tile.isOwned&&(!fieldToSelect.tile||fieldToSelect.tile.isOwned)?gameStore.swapTiles(state.fieldIndex,fieldIndex):gameStore.getHandTile()&&(!fieldToSelect.tile||fieldToSelect.tile.isOwned)?(gameStore.swapHandAndBoard(fieldIndex,state.handIndex),state.board[fieldIndex].tile?.isJoker&&props.onSetJokerLetter()):state.fieldIndex===fieldIndex?mutateState($.debugName,"unset field index [t68q6i]",()=>{state.fieldIndex=null}):mutateState($.debugName,"set field index [t68q7a]",()=>{state.fieldIndex=fieldIndex})}return $.append(jsx("div",{class:[css$g.board,props.isSmaller&&css$g["is-smaller"]],style:{aspectRatio:getAspectRatio()+""},children:jsx(For,{debugName:"board fields [t6c1fv]",each:getBoard,render:field=>jsx("div",{class:()=>[css$g["board-field"],field.index===gameStore.getState().fieldIndex&&css$g["is-selected"],field.item.kind===FieldKind.Normal&&css$g["is-normal"],field.item.kind===FieldKind.DoubleLetter&&css$g["is-double-letter"],field.item.kind===FieldKind.DoubleWord&&css$g["is-double-word"],field.item.kind===FieldKind.Start&&css$g["is-start"],field.item.kind===FieldKind.StartNoBonus&&css$g["is-start-no-bonus"],field.item.kind===FieldKind.TripleLetter&&css$g["is-triple-letter"],field.item.kind===FieldKind.TripleWord&&css$g["is-triple-word"]],onclick:()=>onFieldClicked(field.index),children:jsx(Show,{when:()=>field.item.tile,then:()=>jsx(TileComp,{getTile:()=>field.item.tile}),else:()=>jsx(Slot,{get:()=>fieldKindToString(field.item.kind)})})})})})),$}),errors="_errors_gvcu4_1",css$e={errors},errorIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
  <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
</svg>`,warning="_warning_1gwek_1",content="_content_1gwek_4",message="_message_1gwek_10",css$d={warning,content,message},WarningComp=defineComponent("WarningComp",(props,$)=>($.append(jsx(Show,{when:props.warning,then:()=>jsx("div",{class:css$d.warning,children:jsxs("div",{class:css$d.content,children:[jsx(IconComp,{icon:errorIcon,color:"#f70"}),jsx("div",{class:css$d.message,children:props.warning})]})})})),$)),ErrorsComp=defineComponent("ErrorsComp",(props,$)=>{function errorToString(error2){switch(error2){case MoveError.NoConnection:return"Kapcsol√≥dnod kell a megl√©v≈ë lapk√°khoz!";case MoveError.NoDirection:return"Egy vonalba tedd a lapk√°id, h√©zag n√©lk√ºl!";case MoveError.NoStart:return"√ârintened kell a Start mez≈ët!";case MoveError.NoTile:return"T√©gy le egy lapk√°t!";case MoveError.OneTile:return"Egy szab√°lyos sz√≥hoz legal√°bb k√©t lapka kell!";default:return`[ppy6tx]: ${error2}`}}return $.append(jsx(Show,{when:()=>gameStore.getMoveErrors().length>0,then:()=>jsx("div",{class:css$e.errors,children:jsx(For,{debugName:"move errors [t6c1ge]",each:()=>gameStore.getMoveErrors(),render:error2=>jsx(WarningComp,{warning:()=>errorToString(error2.item)})})})})),$}),tools="_tools_w3za2_1",bingo="_bingo_w3za2_14",result$1="_result_w3za2_20",css$c={tools,bingo,result:result$1},hand="_hand_mlo6c_1",css$b={hand,"hand-slot":"_hand-slot_mlo6c_7","is-selected":"_is-selected_mlo6c_27","is-to-be-replaced":"_is-to-be-replaced_mlo6c_34"},HandComp=defineComponent("HandComp",(props,$)=>($.append(jsx(Show,{when:()=>gameStore.getState().playerIndex!=null,then:()=>jsx("div",{class:css$b.hand,children:jsx(For,{debugName:"player hand tiles [t6c1h5]",each:()=>{const playerIndex=gameStore.getState().playerIndex;return playerIndex==null?[]:gameStore.getState().hands[playerIndex]},render:tile2=>jsx("div",{class:()=>[css$b["hand-slot"],tile2.index===gameStore.getState().handIndex&&css$b["is-selected"],gameStore.getState().handIndicesToReplace[tile2.index]&&css$b["is-to-be-replaced"]],onclick:()=>gameStore.selectHand(tile2.index),children:jsx(Show,{when:()=>tile2.item,then:()=>jsx(TileComp,{getTile:()=>tile2.item,getNeverOwned:()=>!0})})})})})})),$)),listSvg=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
</svg>`,logoSvg='<svg viewBox="0 0 4.2333332 4.2333333" xmlns="http://www.w3.org/2000/svg"><g stroke-width="25.4"><rect fill="#deb887" height="4.233333" ry=".529167" width="4.233333"/><rect fill="#faebd7" height="3.175" ry=".396875" width="3.704167" x=".264583" y=".264583"/><path d="m2.6199947.84852782v.64492128h-.0682128q-.0785481-.3038571-.2025715-.4134111-.1219563-.10955391-.3121254-.10955391-.1446939 0-.2335772.076481-.088883.076481-.088883.1694986 0 .1157551.066146.1984373.064079.084749.260449.1798339l.3017902.1467609q.4196122.2046385.4196122.5395015 0 .258382-.1963702.4175452-.1943033.1570963-.4361488.1570963-.1736326 0-.3968746-.062012-.068213-.020671-.111621-.020671-.047542 0-.074414.053744h-.0682136v-.67592699h.068213q.057878.2893878.2211749.4361487.1632974.146761.3658688.146761.1426269 0 .2315103-.082682.09095-.084749.09095-.2025715 0-.1426268-.1012857-.2397784-.0992184-.0971518-.3989414-.2459798-.2997231-.148828-.3927406-.2687173-.0930175-.1178221-.0930175-.297656 0-.2335772.1591633-.3906735.1612303-.15709618.4154782-.15709618.111621 0 .2707842.0475423.1054199.0310058.1405598.0310058.033073 0 .051676-.0144694.018604-.0144694.043408-.0640787z"/></g></svg>',logo$1="_logo_8omtj_11",title$1="_title_8omtj_17",css$a={"header-row":"_header-row_8omtj_1",logo:logo$1,title:title$1},HeaderComp=defineComponent("HeaderComp",(props,$)=>($.append(jsxs("div",{class:css$a["header-row"],children:[jsx(IconComp,{icon:logoSvg,class:css$a.logo}),jsx("div",{class:css$a.title,children:props.children}),jsx("button",{class:"button",onclick:()=>navigate("menu"),children:jsx(IconComp,{icon:listSvg})})]})),$));class AbortError extends Error{}const RE=/^[a-zA-Z]*Error:\s*/;function errorToMessage(e){return e?(e+"").replace(RE,""):""}function jsonClone(o){return o==null?o:JSON.parse(JSON.stringify(o))}function jsonStringify(o,{spaces,ordered}={}){if(ordered){const allKeys=new Set;return JSON.stringify(o,(key,value)=>(allKeys.add(key),value)),JSON.stringify(o,Array.from(allKeys).sort(),spaces)}else return JSON.stringify(o,void 0,spaces)}function seconds(n){return n*1e3}function minutes(n){return seconds(60)*n}function mirror(field,source,target,getId=getIdFromObject){const sourceType=getType(source),targetRaw=unproxify(target),targetType=getType(targetRaw);if(logLevel>=2&&console.debug(`üî∞ ü™û Mirror: %c${field}(${sourceType})`,HIGHLIGHT),sourceType!==targetType)throw new Error(`[swctkw] ${sourceType} cannot be mirrored to ${targetType}.`);if(sourceType==="array"){const sourceIds=new Set,id__targetItem=new Map;for(let i=0;i<targetRaw.length;i++){const item=targetRaw[i];if(isObject(item)){const id=getId(item);if(id!=null){if(id__targetItem.has(id))throw new Error(`[t55msp] Duplicate target ID in ${field}: ${JSON.stringify(id)}`);id__targetItem.set(id,item)}}}for(let i=0;i<source.length;i++){const item=source[i];if(isObject(item)){const id=getId(item);if(id!=null){if(sourceIds.has(id))throw new Error(`[t55mtx] Duplicate source ID in ${field}: ${JSON.stringify(id)}`);sourceIds.add(id)}}}logLevel>=3&&console.debug("üî∞ ‚ûñ Removing object items with no ID match");for(let i=targetRaw.length-1;i>=0;i--){const item=targetRaw[i];if(isObject(item)){const id=getId(item);(id==null||!sourceIds.has(id))&&target.splice(i,1)}}logLevel>=3&&console.debug("üõë ‚ûñ Removing object items with no ID match"),logLevel>=3&&console.debug("üî∞ ‚ûï Adding items");for(let i=0;i<source.length;i++){const item=source[i];if(isObject(item)){const id=getId(item);if(id==null||!id__targetItem.has(id))logLevel>=3&&console.debug(`üî∞ ‚ûï Add new item: ${i}`),target.splice(i,0,item),logLevel>=3&&console.debug(`üõë ‚ûï Add new item: ${i}`);else{const targetItem=id__targetItem.get(id),targetItemMaybe=targetRaw[i];if(targetItem!==targetItemMaybe){const oldIndex=targetRaw.indexOf(targetItem,i+1);logLevel>=3&&console.debug(`üî∞ ‚úîÔ∏è Insert existing item earlier: ${i} ‚Üê ${oldIndex}`),target.splice(oldIndex,1),target.splice(i,0,targetItem),logLevel>=3&&console.debug(`üõë ‚úîÔ∏è Insert existing item earlier: ${i} ‚Üê ${oldIndex}`)}mirror(`${field}[${i}]`,item,target[i],getId)}}else Object.is(item,target[i])||(logLevel>=3&&console.debug(`üî∞ üü∞ Set item: ${i}`),target.splice(i,0,item),logLevel>=3&&console.debug(`üõë üü∞ Set item: ${i}`))}logLevel>=3&&console.debug("üõë ‚ûï Adding items"),targetRaw.length>source.length&&(logLevel>=3&&console.debug("üî∞ ü™ì Cropping array"),target.length=source.length,logLevel>=3&&console.debug("üõë ü™ì Cropping array"))}else if(sourceType==="object"){const t=targetRaw,sourceKeys=new Set;for(const[key,sourceValue]of Object.entries(source)){sourceKeys.add(key);const targetValue=t[key];Object.is(sourceValue,targetValue)||(Array.isArray(sourceValue)&&Array.isArray(targetValue)||isObject(sourceValue)&&isObject(targetValue)?mirror(`${field}.${key}`,sourceValue,target[key],getId):target[key]=sourceValue)}for(const key of Object.keys(t))sourceKeys.has(key)||delete target[key]}logLevel>=2&&console.debug(`üõë ü™û Mirror: %c${field}(${sourceType})`,HIGHLIGHT)}function isObject(o){return getType(o)==="object"}function getType(o){return Array.isArray(o)?"array":o===null?"null":typeof o}function getIdFromObject(o){const id=o.id;switch(typeof id){case"string":case"number":return id}}function sleep(ms,abortSetter){return new Promise((resolve,reject)=>{abortSetter?.(()=>{clearTimeout(ref),reject(new AbortError)});const ref=setTimeout(resolve,ms)})}var Status=(Status2=>(Status2.Never="Never üï≥Ô∏è",Status2.Loading="Loading ‚åö",Status2.Loaded="Loaded üì¶",Status2.Stale="Stale üßü",Status2.Error="Error ‚ö†Ô∏è",Status2.Deleted="Deleted üóëÔ∏è",Status2))(Status||{});const DEFAULT_STALE_AFTER_MS=seconds(5),DEFAULT_DELETE_AFTER_MS=minutes(5);class CacheEntry{key;loadFn;params;paramsString;staleAfter;deleteAfter;noReloadOnVisible;status="Never üï≥Ô∏è";data;loadedAt;error;states=new Set;enabledCount=0;abortFn;abortWaitForDelete;constructor(o){this.key=o.key,this.loadFn=o.load,this.params=o.params,this.paramsString=o.paramsString,this.staleAfter=o.staleAfter??DEFAULT_STALE_AFTER_MS,this.deleteAfter=o.deleteAfter??DEFAULT_DELETE_AFTER_MS,this.noReloadOnVisible=o.noReloadOnVisible||!1}setStatus(status,data,loadedAt,error2){if(this.status==="Deleted üóëÔ∏è")return;const oldStatus=this.status;logLevel>=2&&console.debug(`üî∞ ‚òÅÔ∏è ${this.key} ${oldStatus} ‚úèÔ∏è ${status}`);const dataChanged=!Object.is(data,this.data);this.status=status,this.data=data,this.loadedAt=loadedAt,this.error=error2;for(const state of this.states)this.updateState(state,dataChanged);this.abortFn?.(),this.abortFn=void 0,status==="Loading ‚åö"?this.load():status==="Loaded üì¶"?this.waitForStale():status==="Deleted üóëÔ∏è"&&this.delete(),logLevel>=2&&console.debug(`üõë ‚òÅÔ∏è ${this.key} ${oldStatus} ‚úèÔ∏è ${status}`)}async load(){try{let isAborted=!1;this.abortFn=()=>{isAborted=!0};const value=await this.loadFn(this.params);if(isAborted)throw new AbortError;this.setStatus("Loaded üì¶",value,Date.now())}catch(e){e instanceof AbortError||(console.error(`Error loading ${JSON.stringify(this.key)} with params ${this.paramsString}:`,e),this.setStatus("Error ‚ö†Ô∏è",void 0,Date.now(),errorToMessage(e)))}}async waitForStale(){try{await sleep(this.staleAfter,it=>{this.abortFn=it}),this.setStatus("Stale üßü",this.data,this.loadedAt)}catch(e){e instanceof AbortError||console.error(e)}}async waitForDelete(){try{await sleep(this.deleteAfter,it=>{this.abortWaitForDelete=it}),this.setStatus("Deleted üóëÔ∏è",this.data,this.loadedAt)}catch(e){e instanceof AbortError||console.error(e)}}addState(state,isEnabled){this.states.add(state),isEnabled&&this.enabledCount++,this.updateState(state),this.abortWaitForDelete?.(),this.abortWaitForDelete=void 0,(this.status==="Error ‚ö†Ô∏è"||this.status==="Stale üßü"||this.status==="Never üï≥Ô∏è")&&(isEnabled?this.setStatus("Loading ‚åö",this.data,this.loadedAt):logLevel>=2&&console.debug("‚õî",JSON.stringify(this.key),"observed."))}updateState(state,dataChanged=!0){mutateState("‚òÅÔ∏è "+this.key,`üëâ ${state.name} (${this.status})`,()=>{state.status=this.status,this.data!=null&&typeof this.data=="object"&&state.data!=null&&typeof state.data=="object"?dataChanged&&mirror(this.key,this.data,state.data):state.data=jsonClone(this.data),state.loadedAt=this.loadedAt,state.error=this.error})}deleteState(state,isEnabled){this.states.delete(state),isEnabled&&this.enabledCount--,this.states.size===0&&this.waitForDelete()}delete(){deleteCacheEntry(this.key,this.paramsString)}makeStaleOrNever(){return this.status==="Loaded üì¶"?(this.setStatus("Stale üßü",this.data,this.loadedAt),!0):this.status==="Loading ‚åö"?(this.data?this.setStatus("Stale üßü",this.data,this.loadedAt):this.setStatus("Never üï≥Ô∏è",void 0,void 0),!0):!1}reload(){return this.status!=="Deleted üóëÔ∏è"?(this.setStatus("Loading ‚åö",this.data,this.loadedAt),!0):!1}maybeReloadOnVisible(){return!this.noReloadOnVisible&&this.enabledCount>0&&(this.status==="Stale üßü"||this.status==="Error ‚ö†Ô∏è"||this.status==="Never üï≥Ô∏è")?(this.setStatus("Loading ‚åö",this.data,this.loadedAt),!0):!1}}const key__param__entry=new Map;function storeCacheEntry(entry){let param__data=key__param__entry.get(entry.key);param__data||(param__data=new Map,key__param__entry.set(entry.key,param__data)),param__data.set(entry.paramsString,entry)}function deleteCacheEntry(key,paramsString){const param__data=key__param__entry.get(key);param__data&&(param__data.delete(paramsString),param__data.size===0&&key__param__entry.delete(key))}function useQuery(name,createOptions){const debugName=activeComps.at(-1).debugName+` ‚Üí ${name}`,state=useState("state",{name:debugName,status:"Never üï≥Ô∏è"},debugName),innerState=useState("innerState",{entryRef:void 0,isEnabled:!1},debugName);return useEffect("options changed [t6e0aa]",()=>{const options2=createOptions();return untrack("apply [t6e0ai]",()=>{const paramsString=jsonStringify(options2.params,{ordered:!0});let entry=key__param__entry.get(options2.key)?.get(paramsString);entry||(entry=new CacheEntry({key:options2.key,load:options2.load,params:options2.params,paramsString,deleteAfter:options2.deleteAfter,staleAfter:options2.staleAfter,noReloadOnVisible:options2.noReloadOnVisible}),storeCacheEntry(entry)),mutateState(debugName,"‚Üí untrackOptionsEffect update innerState [t6c1bq]",()=>{innerState.isEnabled=options2.isEnabled??!0,innerState.entryRef=entry})})},debugName),useEffect("entry changed [t6e0as]",()=>{const entry=innerState.entryRef;if(entry!=null)return entry.addState(state,innerState.isEnabled),()=>{entry.deleteState(state,innerState.isEnabled)}},debugName),state}function getEntries(key,paramsPredicate=!0){const paramsPredicateString=paramsPredicate&&typeof paramsPredicate=="object"?jsonStringify(paramsPredicate,{ordered:!0}):void 0;if(key!=null&&paramsPredicateString){const entry=key__param__entry.get(key)?.get(paramsPredicateString);return entry?[entry]:[]}const paramsPredicateFn=typeof paramsPredicate=="function"?paramsPredicate:void 0;let param__entrys;if(key!=null){const param__entry=key__param__entry.get(key);if(param__entry)param__entrys=[param__entry];else return[]}else param__entrys=Array.from(key__param__entry.values());const result2=[];for(const param__entry of param__entrys)for(const entry of param__entry.values())(paramsPredicateString?paramsPredicateString===entry.paramsString:paramsPredicateFn?paramsPredicateFn(entry.params):paramsPredicate)&&result2.push(entry);return result2}function resetQueries(key,paramsPredicate){console.debug("üî∞ ‚òÅÔ∏è reload",key,paramsPredicate);let result2=0;const entries=getEntries(key,paramsPredicate);for(const entry of entries)entry.makeStaleOrNever()&&entry.maybeReloadOnVisible()&&result2++;return console.debug("üõë ‚òÅÔ∏è reload",key,paramsPredicate,result2),result2}async function loadWordsValidity(words){const knownValidWords=await getKnownWords(),invalidWords=new Set,validWords=new Set;for(const word of words)word.length<2||(word.includes(" ")?invalidWords.add(word):knownValidWords.includes(word)?validWords.add(word):invalidWords.add(word));return{validWords:Array.from(validWords),invalidWords:Array.from(invalidWords)}}var QueryKey=(QueryKey2=>(QueryKey2.AreWordsValid="AreWordsValid",QueryKey2))(QueryKey||{});const css$9={"own-word-info":"_own-word-info_su5wi_1"},signalIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-index-fill" viewBox="0 0 16 16">
  <path d="M8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v5.34l-1.2.24a1.5 1.5 0 0 0-1.196 1.636l.345 3.106a2.5 2.5 0 0 0 .405 1.11l1.433 2.15A1.5 1.5 0 0 0 6.035 16h6.385a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5 5 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.6 2.6 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046z"/>
</svg>`;function url(strs,...values){return String.raw(strs,...values.map(it=>encodeURIComponent(it+"")))}const css$8={"invalid-word":"_invalid-word_o11zh_1","valid-word":"_valid-word_o11zh_6"},WordInfoComp=defineComponent("WordInfoComp",(props,$)=>{const state=useState("state",{isWordValid:void 0});function makeMekLink(wordString){return`http://ertelmezo.oszk.hu/kereses.php?csakcimben=on&kereses=${encodeURIComponent(`"${wordString}"`)}`}function makeWiktionaryLink(wordString){return`https://hu.wiktionary.org/w/index.php?search=${encodeURIComponent(wordString)}`}function makeWikipediaLink(wordString){return`https://hu.wikipedia.org/w/index.php?search=${encodeURIComponent(wordString)}`}function makeGoogleLink(wordString){return`https://www.google.hu/search?q=${encodeURIComponent(`"${wordString}"`)}`}function makeMtaLink(wordString){return`https://helyesiras.mta.hu/helyesiras/default/suggest?q=${encodeURIComponent(wordString)}`}async function suggestWord(){const word=props.getWord(),isValid=state.isWordValid;if(!word)throw new Error("[rxwcdk] No word!");mutateState($.debugName,"set confirm [t6wvt2]",()=>{uiStore.confirm={title:"‚Äû"+word+'" '+(isValid?"legyen szab√°lytalan":"legyen szab√°lyos"),message:`Itt jelezheted nekem, hogy a kiv√°lasztott ‚Äû${word}" ${isValid?"sz√≥ legyen szab√°lytalan.":"sz√≥ legyen szab√°lyos."}

FONTOS:
1. Ha ige, csak az egyes sz√°m harmadik szem√©ly≈± alakja (pl. eszik, megy, tesz) szab√°lyos.
2. Ha f≈ën√©v, csak ragozatlan alakban (pl. asztal, sz√©k, zimank√≥) szab√°lyos.
3. Ha mell√©kn√©v, akkor csak az alapeset≈± alakban (pl. eg√©sz, kerek, sz√©p) szab√°lyos.
4. Nemzetis√©gek √©s rasszok jelz≈ëi (pl. magyar, r√°c, sv√°b) nem szab√°lyosak.
5. Ritka szavakat csak akkor fogadok el, ha van sz√≥cikk√ºk a Wikisz√≥t√°rban vagy a Wikip√©di√°n.
6. Tr√°g√°rs√°got nem fogadok el.
7. Id≈ëbe telik ‚Äì napok, hetek, h√≥napok, ki tudja? L√©gy t√ºrelmes!
8. Az √©n d√∂nt√©sem, hogy mit fogadok el. L√©gy meg√©rt≈ë!`,ok:async()=>{isValid?window.open(url`https://github.com/andraaspar/skrabli/issues/new?template=${"√©rv√©nytelen-sz√≥"}.md&title=${word}`,"_blank"):window.open(url`https://github.com/andraaspar/skrabli/issues/new?template=${"√∫j-sz√≥"}.md&title=${word}`,"_blank")}}})}let lastWord,lastIsValid;return useEffect("update word is valid [t68rno]",()=>{const word=props.getWord(),isValid=props.getIsValid?.();word===lastWord&&isValid===lastIsValid||(lastWord=word,lastIsValid=isValid,word==null?mutateState($.debugName,"update isWordValid [t6wvt5]",()=>{state.isWordValid=isValid}):isValid!=null?mutateState($.debugName,"update isWordValid [t6wvt6]",()=>{state.isWordValid=isValid}):(mutateState($.debugName,"update isWordValid [t6wvt7]",()=>{state.isWordValid=void 0}),(async()=>{const knownWords=await getKnownWords();props.getWord()===word&&mutateState($.debugName,"update isWordValid [t6wvt8]",()=>{state.isWordValid=knownWords.includes(word)})})()))}),$.append(jsxs(DialogComp,{isOpen:()=>!!props.getWord(),children:[jsxs(DialogHeaderComp,{onClose:()=>props.onClose(),children:[()=>state.isWordValid===!0?"Szab√°lyos sz√≥:":state.isWordValid===!1?"Szab√°lytalan sz√≥:":"Sz√≥:"," ",jsx("span",{class:()=>[state.isWordValid&&css$8["valid-word"],state.isWordValid===!1&&css$8["invalid-word"]],children:props.getWord})]}),jsxs(DialogBodyComp,{children:[jsx(Show,{when:()=>props.getWord(),then:()=>{const word=props.getWord();return word?jsxs(ButtonsComp,{children:[jsx("a",{class:"button",href:()=>makeMekLink(word),target:"_blank",rel:"noopener noreferrer",children:"M√âK"}),jsx("a",{class:"button",href:()=>makeWiktionaryLink(word),target:"_blank",rel:"noopener noreferrer",children:"Wikisz√≥t√°r"}),jsx("a",{class:"button",href:()=>makeWikipediaLink(word),target:"_blank",rel:"noopener noreferrer",children:"Wikip√©dia"}),jsx("a",{class:"button",href:()=>makeGoogleLink(word),target:"_blank",rel:"noopener noreferrer",children:"Google"}),jsx("a",{class:"button",href:()=>makeMtaLink(word),target:"_blank",rel:"noopener noreferrer",children:"MTA"})]}):""}}),jsx(Show,{when:()=>state.isWordValid!=null,then:()=>jsx(ButtonsComp,{children:jsxs("button",{onclick:()=>suggestWord(),children:[jsx(IconComp,{icon:signalIcon,color:"#f89"})," ",()=>state.isWordValid?"Jelzem ezt a sz√≥t, legyen szab√°lytalan!":"K√©rem ezt a sz√≥t, legyen szab√°lyos!"]})})})]})]})),$}),label="_label_1wctv_13",css$7={"word-list":"_word-list_1wctv_1",label,"invalid-word":"_invalid-word_1wctv_21","valid-word":"_valid-word_1wctv_26"},WordListComp=defineComponent("WordListComp",(props,$)=>{const state=useState("state",{openWordIndex:-1});return $.append(jsx(Show,{debugName:"WordListComp.words",when:()=>props.getWords().length>0,then:()=>{const words=props.getWords(),wordStrings=words.map(word=>getWordString(word));return jsxs("div",{class:css$7["word-list"],children:[jsx(Show,{when:()=>props.getLabel?.(),then:()=>jsx("div",{class:css$7.label,children:props.getLabel})}),jsx(ButtonsComp,{children:jsx(For,{debugName:"words [t6c1ka]",each:()=>words,render:word=>jsxs("button",{onclick:()=>mutateState($.debugName,"set open word index [t68q97]",()=>{state.openWordIndex=word.index}),children:[jsx("span",{class:()=>[props.getValidity?.()&&css$7["valid-word"],props.getValidity?.()===!1&&css$7["invalid-word"]],children:()=>wordStrings[word.index].replace(" ","¬†")}),jsx(Show,{when:props.getShowScore,then:()=>jsxs(Fragment,{children:[" ",jsxs("span",{class:"score",children:[()=>getWordScore(word.item)+"","¬†pont"]})]})})]})})}),jsx(WordInfoComp,{getWord:()=>wordStrings[state.openWordIndex],getIsValid:props.getValidity,onClose:()=>mutateState($.debugName,"unset open word index [t68qa6]",()=>{state.openWordIndex=-1})})]})}})),$}),OwnWordInfoComp=defineComponent("OwnWordInfoComp",(props,$)=>{const wordsValidity=useQuery("wordsValidity",()=>({key:QueryKey.AreWordsValid,load:loadWordsValidity,params:gameStore.getAllOwnedWordStrings()})),validAndInvalidWords=useState("validAndInvalidWords",{value:void 0});return useEffect("update wordsValidity [t6cbzm]",()=>{if(!wordsValidity.data){mutateState($.debugName,"no words validity [t6cbty]",()=>{validAndInvalidWords.value=void 0});return}const valid=[],invalid=[];for(let word of gameStore.getAllOwnedWords())wordsValidity.data.validWords.includes(getWordString(word))?valid.push(word):invalid.push(word);valid.length>0||invalid.length>0?mutateState($.debugName,"set words validity [t6cbus]",()=>{validAndInvalidWords.value={valid,invalid}}):mutateState($.debugName,"no words validity [t6cbv3]",()=>{validAndInvalidWords.value=void 0})}),$.append(jsx(Show,{debugName:"validAndInvalidWords",when:()=>validAndInvalidWords.value,then:getValidAndInvalidWords=>jsxs("div",{class:css$9["own-word-info"],children:[jsx(WordListComp,{getWords:()=>getValidAndInvalidWords().valid,getValidity:()=>!0,getShowScore:()=>!0,getLabel:()=>"Szab√°lyos szavak"}),jsx(WordListComp,{getWords:()=>getValidAndInvalidWords().invalid,getValidity:()=>!1,getLabel:()=>"Szab√°lytalan szavak"})]})})),$}),changeIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down-up" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5m-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5"/>
</svg>`,skipIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-square-fill" viewBox="0 0 16 16">
  <path d="M0 14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2zm4.5-6.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5a.5.5 0 0 1 0-1"/>
</svg>`,collectIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eject-fill" viewBox="0 0 16 16">
  <path d="M7.27 1.047a1 1 0 0 1 1.46 0l6.345 6.77c.6.638.146 1.683-.73 1.683H1.656C.78 9.5.326 8.455.926 7.816zM.5 11.5a1 1 0 0 1 1-1h13a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1h-13a1 1 0 0 1-1-1z"/>
</svg>`,hintIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-magic" viewBox="0 0 16 16">
  <path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707zM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1zM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707zM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0z"/>
</svg>`,pencilSvg=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16">
  <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"/>
</svg>`,notOkIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"/>
</svg>`,verticalIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down-square" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/>
</svg>`,horizontalIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-square" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm4.5 5.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/>
</svg>`,results="_results_s99c3_1",result="_result_s99c3_1",title="_title_s99c3_12",css$6={results,result,title},HintsComp=defineComponent("HintsComp",(props,$)=>{const state=useState("state",{hints:null,hintsError:null});async function load2(){try{mutateState($.debugName,"clear hints [t6wvx1]",()=>{state.hints=null,state.hintsError=null});const hints=await loadHints({board:jsonClone$1(gameStore.getState().board),boardSize:jsonClone$1(gameStore.getState().boardSize),hand:jsonClone$1(gameStore.getHand())});mutateState($.debugName,"set hints [t6wvx2]",()=>{state.hints=hints})}catch(e){console.error("[rx9sem]",e),mutateState($.debugName,"set hintsError [t6wvx3]",()=>{state.hintsError=e+""})}}return useEffect("HintsComp load effect [t6wvx4]",()=>{props.getIsOpen()&&load2()}),$.append(jsxs(DialogComp,{isOpen:props.getIsOpen,children:[jsx(DialogHeaderComp,{onClose:props.onClose,children:"Tipp"}),jsx(DialogBodyComp,{children:jsxs("div",{class:css$6.results,children:[jsx(Show,{when:()=>!!state.hintsError,then:()=>jsx(ErrorComp,{error:()=>state.hintsError})}),jsx(Show,{when:()=>!state.hintsError&&state.hints==null,then:()=>jsx(IconComp,{icon:loadingSvg})}),jsx(Show,{when:()=>state.hints!=null,then:()=>{const hintsTexts=()=>state.hints==null?{horizontal:"",vertical:""}:{horizontal:state.hints.horizontal.map(it=>it.word).join(", "),vertical:state.hints.vertical.map(it=>it.word).join(", ")};return jsxs(Fragment,{children:[jsxs("div",{class:css$6.result,children:[jsxs("div",{class:css$6.title,children:[jsx(IconComp,{icon:horizontalIcon})," V√≠zszintes"]}),jsx("div",{children:()=>hintsTexts().horizontal||"‚Äë"})]}),jsxs("div",{class:css$6.result,children:[jsxs("div",{class:css$6.title,children:[jsx(IconComp,{icon:verticalIcon})," F√ºgg≈ëleges"]}),jsx("div",{children:()=>hintsTexts().vertical||"‚Äë"})]})]})}})]})})]})),$}),PlaceTileButtonsComp=defineComponent("PlaceTileButtonsComp",(props,$)=>{const state=useState("state",{hintsAreOpen:!1}),wordsValidity=useQuery("wordsValidity",()=>({key:QueryKey.AreWordsValid,load:loadWordsValidity,params:gameStore.getAllOwnedWordStrings()})),getIsOkButtonDisabled=()=>gameStore.getMoveErrors().length>0||wordsValidity.status===Status.Never||wordsValidity.status===Status.Loading||wordsValidity.status===Status.Error||wordsValidity.status===Status.Deleted||(wordsValidity.data?.invalidWords.length??1)>0,getOkButtonLabel=()=>wordsValidity.status===Status.Never||wordsValidity.status===Status.Loading?"":wordsValidity.status===Status.Error?" Hiba!":getIsOkButtonDisabled()?" Nem j√≥!":" Ok√©",getOkButtonIcon=()=>wordsValidity.status===Status.Never||wordsValidity.status===Status.Loading?loadingSvg:wordsValidity.status===Status.Error?errorIcon:getIsOkButtonDisabled()?notOkIcon:okIcon,getOkButtonIconColor=()=>{if(!(wordsValidity.status===Status.Never||wordsValidity.status===Status.Loading)){if(wordsValidity.status===Status.Error)return"#f78";if(!getIsOkButtonDisabled())return"lightgreen"}};function swapTiles(){gameStore.collectTiles(),gameStore.setMode(Mode.ReplaceTiles)}function skip(){const skipsToEndGame=MAX_SKIP_PER_PLAYER*gameStore.playerInfos.length,skipsRemaining=Math.ceil(skipsToEndGame-(gameStore.getState().skipCount??0));mutateState($.debugName,"set confirm [t6wvz1]",()=>{uiStore.confirm={title:"A k√∂r kihagy√°sa",message:`Biztos hogy nem teszel semmit?

`+(skipsRemaining===1?"Ezzel v√©get √©r a j√°t√©k.":`Ha a j√°t√©kosok ezut√°n m√©g ${skipsRemaining-1} alkalommal kihagyj√°k a k√∂rt, a j√°t√©k v√©get √©r.`),ok:()=>{gameStore.skip()}}})}function showHints(){(gameStore.getPlayerInfo().hints>0||gameStore.getState().hintUsed)&&(gameStore.getState().hintUsed||(mutateState($.debugName,"use a hint [t6wvz2]",()=>{gameStore.getState().hintUsed=!0,gameStore.getPlayerInfo().hints--}),gameStore.saveGame()),gameStore.collectTiles(),mutateState($.debugName,"open hints [t68qbb]",()=>{state.hintsAreOpen=!0}))}return $.append(jsxs(Fragment,{children:[jsxs(ButtonsComp,{children:[jsxs("button",{disabled:getIsOkButtonDisabled,onclick:()=>gameStore.finishMove(),children:[jsx(IconComp,{icon:getOkButtonIcon,color:getOkButtonIconColor}),getOkButtonLabel,jsx(Show,{when:()=>gameStore.getMoveScore()>0,then:()=>jsxs("span",{class:"score",children:[": ",()=>gameStore.getMoveScore()+"","¬†pont"]})})]}),jsxs("button",{onclick:()=>gameStore.collectTiles(),children:[jsx(IconComp,{icon:collectIcon,color:"#fd0"})," Szedd √∂ssze"]}),jsxs("button",{disabled:()=>!gameStore.getCanSwap(),onclick:()=>swapTiles(),children:[jsx(IconComp,{icon:changeIcon,color:"#0df"})," Csere"]}),jsxs("button",{onclick:()=>skip(),children:[jsx(IconComp,{icon:skipIcon,color:"#f78"})," Kihagyom"]}),jsx(Show,{when:()=>gameStore.getHand,then:()=>jsxs("button",{onclick:()=>showHints(),disabled:()=>gameStore.getPlayerInfo().hints<=0&&!gameStore.getState().hintUsed,children:[jsx(IconComp,{icon:hintIcon,color:"#f7f"})," Tipp:"," ",()=>gameStore.getPlayerInfo().hints+""]})}),jsx(Show,{when:()=>{const tile2=gameStore.getTile();return tile2?.isOwned&&tile2.isJoker},then:()=>jsxs("button",{onclick:()=>props.onSetJokerLetter(),children:[jsx(IconComp,{icon:pencilSvg,color:"#f60"})," √Åt√≠rom a lapka bet≈±j√©t"]})})]}),jsx(HintsComp,{getIsOpen:()=>state.hintsAreOpen,onClose:()=>mutateState($.debugName,"close hints [t68icz]",()=>{state.hintsAreOpen=!1})})]})),$}),css$5={"placed-word-info":"_placed-word-info_d9xwc_1"},PlacedWordInfoComp=defineComponent("PlacedWordInfoComp",(props,$)=>($.append(jsx(Show,{when:gameStore.getPlacedValidAndInvalidWords,then:getPlacedValidAndInvalidWords=>jsx("div",{class:css$5["placed-word-info"],children:jsx(WordListComp,{getWords:()=>getPlacedValidAndInvalidWords().valid,getLabel:()=>"Szavak a v√°lasztott mez≈ën"})})})),$)),bagFullIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bag-fill" viewBox="0 0 16 16">
  <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1m3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4z"/>
</svg>`,bagEmptyIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bag-x" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M6.146 8.146a.5.5 0 0 1 .708 0L8 9.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 10l1.147 1.146a.5.5 0 0 1-.708.708L8 10.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 10 6.146 8.854a.5.5 0 0 1 0-.708"/>
  <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1m3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1z"/>
</svg>`,playersIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people" viewBox="0 0 16 16">
  <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1zm-7.978-1L7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002-.014.002zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0M6.936 9.28a6 6 0 0 0-1.23-.247A7 7 0 0 0 5 9c-4 0-5 3-5 4q0 1 1 1h4.216A2.24 2.24 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816M4.92 10A5.5 5.5 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0m3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4"/>
</svg>`;function aiLevelToColor(aiLevel){switch(aiLevel){case AiLevel.Human:return"lch(80 100 180)";case AiLevel.Easy:return"lch(80 100 120)";case AiLevel.Medium:return"lch(80 100 60)";case AiLevel.Hard:return"lch(80 100 20)";case AiLevel.VeryHard:case AiLevel.Ultimate:return"lch(80 100 320)"}}const cpuFullIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cpu-fill" viewBox="0 0 16 16">
  <path d="M6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5z"/>
  <path d="M5.5.5a.5.5 0 0 0-1 0V2A2.5 2.5 0 0 0 2 4.5H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2A2.5 2.5 0 0 0 4.5 14v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14a2.5 2.5 0 0 0 2.5-2.5h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14A2.5 2.5 0 0 0 11.5 2V.5a.5.5 0 0 0-1 0V2h-1V.5a.5.5 0 0 0-1 0V2h-1V.5a.5.5 0 0 0-1 0V2h-1zm1 4.5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3A1.5 1.5 0 0 1 6.5 5"/>
</svg>`,cpuIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cpu" viewBox="0 0 16 16">
  <path d="M5 0a.5.5 0 0 1 .5.5V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2A2.5 2.5 0 0 1 14 4.5h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14a2.5 2.5 0 0 1-2.5 2.5v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14A2.5 2.5 0 0 1 2 11.5H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2A2.5 2.5 0 0 1 4.5 2V.5A.5.5 0 0 1 5 0m-.5 3A1.5 1.5 0 0 0 3 4.5v7A1.5 1.5 0 0 0 4.5 13h7a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 11.5 3zM5 6.5A1.5 1.5 0 0 1 6.5 5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5zM6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5z"/>
</svg>`,personIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
  <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
</svg>`;function aiLevelToIcon(aiLevel){switch(aiLevel){case AiLevel.Human:return personIcon;case AiLevel.Easy:case AiLevel.Medium:case AiLevel.Hard:case AiLevel.VeryHard:return cpuIcon;case AiLevel.Ultimate:return cpuFullIcon}}const layout="_layout_q175g_1",player="_player_q175g_9",bag="_bag_q175g_25",css$4={layout,player,"player-name-button":"_player-name-button_q175g_16",bag};function numberToSignedString(n){return n>=0?`+${n}`:n+""}const players$1="_players_l92rj_1",tiles="_tiles_l92rj_15",css$3={players:players$1,"player-bonus":"_player-bonus_l92rj_10",tiles},PlayersComp=defineComponent("PlayersComp",(props,$)=>($.append(jsx("div",{class:css$3.players,children:jsx(For,{debugName:"players [t6c1kw]",each:()=>gameStore.playerInfos,render:playerInfo=>jsxs(Fragment,{children:[jsxs("div",{children:[jsx(IconComp,{icon:()=>aiLevelToIcon(playerInfo.item.aiLevel),color:()=>aiLevelToColor(playerInfo.item.aiLevel)})," ",()=>playerInfo.item.name]}),jsxs("div",{class:"score",children:[()=>gameStore.getState().playerScores.at(playerInfo.index)+""," ","pont",jsx(Show,{when:()=>gameStore.getState().mode===Mode.Ended,then:()=>jsxs("div",{class:css$3["player-bonus"],children:[()=>numberToSignedString(gameStore.getPlayerBonuses()[playerInfo.index])," ","pont"]})})]}),jsxs("div",{class:css$3.tiles,children:[()=>gameStore.getState().hands.at(playerInfo.index)?.filter(Boolean).length+""," ","lapka"]})]})})})),$)),PlayerComp=defineComponent("PlayerComp",(props,$)=>{const state=useState("state",{playersOpen:!1});function onPlayerClicked(){const playerIndex=gameStore.getState().playerIndex,name=prompt("Mi a neved?",gameStore.playerInfos[playerIndex].name);name&&name.trim()&&(mutateState($.debugName,"update player name [t6wvy1]",()=>{gameStore.playerInfos[playerIndex].name=name.trim(),gameStore.name=gameNameFromPlayerInfos(gameStore.playerInfos)}),gameStore.saveGame())}return $.append(jsxs(Fragment,{children:[jsxs("div",{class:css$4.layout,children:[jsx("button",{onclick:()=>mutateState($.debugName,"open players list [t68myi]",()=>{state.playersOpen=!0}),children:jsx(IconComp,{icon:playersIcon,color:"lch(80 0 0 / .6)"})}),jsxs("div",{class:css$4.player,children:[jsxs("button",{class:css$4["player-name-button"],onclick:()=>onPlayerClicked(),children:[jsx(IconComp,{icon:()=>aiLevelToIcon(gameStore.getPlayerInfo().aiLevel),color:()=>aiLevelToColor(gameStore.getPlayerInfo().aiLevel)})," ",()=>gameStore.getPlayerInfo().name]}),jsxs("div",{class:"score",children:[()=>gameStore.getPlayerScore()+""," pont"]})]}),jsx(Show,{when:()=>gameStore.getState().mode!==Mode.Ended,then:()=>jsxs("div",{class:css$4.bag,title:"Lapk√°k a zs√°kban",children:[jsx(IconComp,{icon:()=>gameStore.getState().bag.length>0?bagFullIcon:bagEmptyIcon})," ",()=>gameStore.getState().bag.length+""]})})]}),jsxs(DialogComp,{isOpen:()=>state.playersOpen,children:[jsx(DialogHeaderComp,{onClose:()=>mutateState($.debugName,"close players list [t68n0l]",()=>{state.playersOpen=!1}),children:"J√°t√©kosok"}),jsx(DialogBodyComp,{children:jsx(PlayersComp,{})})]})]})),$}),ReplaceTilesButtonsComp=defineComponent("ReplaceTilesButtonsComp",(props,$)=>{function cancel(){gameStore.deselectTilesToReplace(),gameStore.setMode(Mode.PlaceTile)}return $.append(jsxs(ButtonsComp,{children:[jsxs("button",{onclick:()=>gameStore.swap(),children:[jsx(IconComp,{icon:changeIcon,color:"#0df"})," Csere"]}),jsxs("button",{onclick:()=>cancel(),children:[jsx(IconComp,{icon:cancelIcon,color:"#f89"})," M√©gse"]})]})),$}),LETTERS=[{letter:" ",count:2,score:0},{letter:"a",count:6,score:1},{letter:"√°",count:4,score:1},{letter:"b",count:3,score:2},{letter:"c",count:1,score:5},{letter:"cs",count:1,score:7},{letter:"d",count:3,score:2},{letter:"dz",count:0,score:0},{letter:"dzs",count:0,score:0},{letter:"e",count:6,score:1},{letter:"√©",count:3,score:3},{letter:"f",count:2,score:4},{letter:"g",count:3,score:2},{letter:"gy",count:2,score:4},{letter:"h",count:2,score:3},{letter:"i",count:3,score:1},{letter:"√≠",count:1,score:5},{letter:"j",count:2,score:4},{letter:"k",count:6,score:1},{letter:"l",count:4,score:1},{letter:"ly",count:1,score:8},{letter:"m",count:3,score:1},{letter:"n",count:4,score:1},{letter:"ny",count:1,score:5},{letter:"o",count:3,score:1},{letter:"√≥",count:3,score:2},{letter:"√∂",count:2,score:4},{letter:"≈ë",count:1,score:7},{letter:"p",count:2,score:4},{letter:"q",count:0,score:0},{letter:"r",count:4,score:1},{letter:"s",count:3,score:1},{letter:"sz",count:2,score:3},{letter:"t",count:5,score:1},{letter:"ty",count:1,score:10},{letter:"u",count:2,score:4},{letter:"√∫",count:1,score:7},{letter:"√º",count:2,score:4},{letter:"≈±",count:1,score:7},{letter:"v",count:2,score:3},{letter:"w",count:0,score:0},{letter:"x",count:0,score:0},{letter:"y",count:0,score:0},{letter:"z",count:2,score:4},{letter:"zs",count:1,score:8}],options="_options_19go6_1",option="_option_19go6_1",css$2={options,option},SetJokerLetterComp=defineComponent("SetJokerLetterComp",(props,$)=>{function onLetterClicked(letterIndex){const letter=LETTERS[letterIndex];gameStore.setJokerLetter(letter.letter),props.onClose()}return $.append(jsx(DialogComp,{isOpen:props.isOpen,children:jsx("div",{class:css$2.options,children:jsx(For,{debugName:"joker letter buttons [t6c1jv]",each:()=>LETTERS,render:letter=>jsx("button",{onclick:()=>onLetterClicked(letter.index),class:css$2.option,children:()=>letter.item.letter})})})})),$}),GameScreenComp=defineComponent("GameScreenComp",(props,$)=>{const state=useState("state",{showSetJokerLetter:!1});gameStore.getStarted()||uiStore.lockWhile($.debugName,async()=>{const game=await loadContinuableGame();game?mutateState($.debugName,"load continuable game [t6ww01]",()=>{Object.assign(gameStore,game)}):navigate("menu")});async function endGame(){await uiStore.lockWhile($.debugName,async()=>{deleteGameFromDb(gameStore.id)}),mutateState($.debugName,"reset game [t6ww02]",()=>{Object.assign(gameStore,DEFAULT_GAME_STORE)}),navigate("menu")}return $.append(jsxs("div",{class:"screen",children:[jsx(HeaderComp,{children:()=>gameStore.name}),jsx(Show,{when:gameStore.getStarted,then:()=>jsxs(Fragment,{children:[jsx(BoardComp,{onSetJokerLetter:()=>mutateState($.debugName,"show joker picker [t68q09]",()=>{state.showSetJokerLetter=!0})}),jsxs("div",{class:css$c.tools,children:[jsx(Show,{when:()=>gameStore.getState().mode===Mode.PlaceTile,then:()=>jsxs(Fragment,{children:[jsx(PlayerComp,{}),jsx(HandComp,{}),jsx(Show,{when:()=>gameStore.getIsBingo(),then:()=>jsxs("div",{class:css$c.bingo,children:["+",BINGO_SCORE+""," pont!"]})}),jsx(OwnWordInfoComp,{}),jsx(ErrorsComp,{}),jsx(PlaceTileButtonsComp,{onSetJokerLetter:()=>mutateState($.debugName,"show joker picker [t68q0y]",()=>{state.showSetJokerLetter=!0})}),jsx(PlacedWordInfoComp,{})]})}),jsx(Show,{when:()=>gameStore.getState().mode===Mode.ReplaceTiles,then:()=>jsxs(Fragment,{children:[jsx(PlayerComp,{}),jsx(HandComp,{}),jsx(ReplaceTilesButtonsComp,{})]})}),jsx(Show,{when:()=>gameStore.getState().mode===Mode.Ended,then:()=>jsxs(Fragment,{children:[jsx("div",{class:css$c.result,children:jsx(Show,{when:()=>gameStore.getIsGameDrawn(),then:()=>"D√∂ntetlen!",else:()=>`${()=>gameStore.getWinnersNames()} gy≈ëz√∂tt!`})}),jsx(PlayersComp,{}),jsx(ButtonsComp,{children:jsx("button",{onclick:()=>endGame(),children:"Ok√©"})})]})})]}),jsx(SetJokerLetterComp,{isOpen:()=>state.showSetJokerLetter,onClose:()=>mutateState($.debugName,"hide joker picker [t68q2l]",()=>{state.showSetJokerLetter=!1})})]})})]})),$}),refreshIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
</svg>`,updateIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-square-fill" viewBox="0 0 16 16">
  <path d="M2 16a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2zm6.5-4.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 1 0"/>
</svg>`,playIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-circle-fill" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814z"/>
</svg>`,starIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
  <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
</svg>`;function getNoError(fallback,fn){try{return fn()}catch{}return fallback}function continueableGameExists(){return!!getNoError(!1,()=>localStorage[LocalStorageKey.LastGameId])}async function loadGameInfos(){let db;try{db=await openSkrabliDb();const gameInfos=[],tx=db.transaction("games");for await(const cursor of tx.store.index("byTimestamp").iterate(void 0,"prev")){const{states,...gameInfo}=cursor.value;gameInfos.push(gameInfo)}return gameInfos}catch(e){return console.error("[ry5f5h]",e),[]}finally{db?.close()}}function useLoadAllWordsValidity(onSuccess){async function loadAllWordsValidity(){await uiStore.lockWhile((activeComps.at(-1)?.debugName??"")+" loadAllWordsValidity [t6c2cx]",async()=>{await loadAllWordsValidityFromServer(),resetQueries(QueryKey.AreWordsValid);try{localStorage[LocalStorageKey.AllWordsValidityUpdated]=Date.now()}catch{}await onSuccess?.()})}return{loadAllWordsValidity}}const logo="_logo_1c8bs_1",menu="_menu_1c8bs_8",version="_version_1c8bs_41",flex="_flex_1c8bs_49",css$1={logo,menu,"menu-buttons":"_menu-buttons_1c8bs_18","button-row":"_button-row_1c8bs_25",version,flex},MenuScreenComp=defineComponent("MenuScreenComp",(props,$)=>{const state=useState("state",{gameInfos:void 0,allWordsValidityUpdated:getNoError(1/0,()=>parseInt(localStorage[LocalStorageKey.AllWordsValidityUpdated]??"0",10))});$.append(jsx(Fragment,{children:jsx("div",{class:"screen",children:jsx(Show,{when:()=>state.gameInfos!=null,then:()=>jsxs(Fragment,{children:[jsxs("div",{class:css$1.menu,children:[jsx("div",{innerHTML:logoSvg,class:css$1.logo}),jsx(Show,{when:()=>!!uiStore.updateServiceWorker,then:()=>jsx("div",{class:"buttons",children:jsxs("button",{class:css$1.green,onclick:update,children:[jsx(IconComp,{icon:updateIcon})," Friss√≠tsd az alkalmaz√°st"]})})}),jsx(Show,{when:()=>gameStore.getStarted()||continueableGameExists(),then:()=>jsx("div",{class:"buttons",children:jsxs("button",{onclick:continueGame,children:[jsx(IconComp,{icon:playIcon,color:"lch(80 100 260)"})," ","Folytat√°s"]})})}),jsx(Show,{when:()=>(state.gameInfos?.length??0)>0,then:()=>jsx("div",{class:css$1["menu-buttons"],children:jsx(For,{debugName:"gameInfos [t6c1hv]",each:()=>state.gameInfos,render:gameInfo=>jsxs("div",{class:css$1["button-row"],children:[jsx("button",{class:css$1.flex,onclick:()=>loadGameById(gameInfo.item.id),children:()=>gameInfo.item.name}),jsx("button",{onclick:()=>deleteGameById(gameInfo.item.id),children:jsx(IconComp,{icon:cancelIcon,color:"lch(80 100 30)"})})]})})})}),jsx("div",{class:"buttons",children:jsxs("button",{onclick:startNewGame,children:[jsx(IconComp,{icon:starIcon,color:"lch(80 100 70)"})," √öj j√°t√©k"]})}),jsx("div",{class:"buttons",children:jsxs("button",{onclick:()=>loadAllWordsValidity(),disabled:()=>!wordsValidityExpired(),children:[jsx(IconComp,{icon:refreshIcon,color:"#5f3"}),"Friss√≠tsd a szavakat"]})})]}),jsxs("div",{class:css$1.version,children:["Verzi√≥: ","2025. 11. 27. 17:31:16"]})]})})})}));async function continueGame(){gameStore.getStarted()||await uiStore.lockWhile($.debugName,async()=>{const game=await loadContinuableGame();game&&mutateState($.debugName,"use continuable game [t62op2]",()=>{Object.assign(gameStore,game)})}),gameStore.getStarted()&&navigate("game")}function startNewGame(){navigate("new")}function onSuccess(){mutateState($.debugName,"update allWordsValidityUpdated [t62ni1]",()=>{state.allWordsValidityUpdated=Date.now()})}const{loadAllWordsValidity}=useLoadAllWordsValidity(onSuccess);uiStore.lockWhile($.debugName,async()=>{const gameInfos=await loadGameInfos();mutateState($.debugName,"set gameInfos [t6c9br]",()=>{state.gameInfos=gameInfos})});async function loadGameById(id){await uiStore.lockWhile($.debugName,async()=>{const game=await loadGame(id);if(!game)throw new Error("[ryb06t] Game not found!");mutateState($.debugName,"use loaded game [t62nj8]",()=>{Object.assign(gameStore,game)})}),navigate("game")}function getGameTitleById(id){return state.gameInfos?state.gameInfos.find(it=>it.id===id)?.name??"":""}async function deleteGameById(id){mutateState($.debugName,"set confirm [t62nas]",()=>{uiStore.confirm={title:"T√∂rl√©s",message:`Biztosan t√∂r√∂ljem a j√°t√©kot?
${getGameTitleById(id)}`,ok:async()=>{await uiStore.lockWhile($.debugName,async()=>{await deleteGameFromDb(id);const gameInfos=await loadGameInfos();mutateState($.debugName,"update gameInfos [t62nft]",()=>{state.gameInfos=gameInfos})}),gameStore.id===id&&mutateState($.debugName,"use default game [t6c1z3]",()=>{Object.assign(gameStore,DEFAULT_GAME_STORE)})}}})}async function update(){uiStore.updateServiceWorker&&await uiStore.lockWhile($.debugName,uiStore.updateServiceWorker)}function wordsValidityExpired(){return state.allWordsValidityUpdated<Date.now()-1e3*60*5}return $}),arrowLeftIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
</svg>`,arrowRightIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"/>
</svg>`,addPlayerIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-add" viewBox="0 0 16 16">
  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0m-2-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
  <path d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"/>
</svg>`,trashIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
  <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"/>
</svg>`;function aiLevelToString(aiLevel){switch(aiLevel){case AiLevel.Human:return"j√°t√©kos";case AiLevel.Easy:return"k√∂nny≈± robot";case AiLevel.Medium:return"k√∂zepes robot";case AiLevel.Hard:return"neh√©z robot";case AiLevel.VeryHard:return"durva robot";case AiLevel.Ultimate:return"v√©gs≈ë robot"}}function replaceLocation(target){location.hash="#"+target}function stringToBoardInfo(s){const rows=s.trim().split(/\n/),rowLength=rows[0].length,board2=rows.flatMap(row=>row.split("").map(letter=>({kind:letter,tile:null}))),boardSize={width:rowLength,height:board2.length/rowLength};return{board:board2,boardSize}}const BOARDS=[`
W--l---W---l--W
-w---L---L---w-
--w---l-l---w--
l--w---l---w--l
----w-----w----
-L---L---L---L-
--l---l-l---l--
W--l---s---l--W
--l---l-l---l--
-L---L---L---L-
----w-----w----
l--w---l---w--l
--w---l-l---w--
-w---L---L---w-
W--l---W---l--W
`,`
---------------
---------------
---------------
---------------
---------------
---------------
---------------
-------S-------
---------------
---------------
---------------
---------------
---------------
---------------
---------------
`].map(stringToBoardInfo),form="_form_1ea2m_1",players="_players_1ea2m_32",none="_none_1ea2m_46",css={form,"form-control":"_form-control_1ea2m_17","form-buttons":"_form-buttons_1ea2m_18","form-label":"_form-label_1ea2m_23","form-control-centered":"_form-control-centered_1ea2m_27",players,none,"board-and-buttons":"_board-and-buttons_1ea2m_53"},LEVELS=[AiLevel.Human,AiLevel.Easy,AiLevel.Medium,AiLevel.Hard,AiLevel.VeryHard,AiLevel.Ultimate],NewGameScreenComp=defineComponent("NewGameScreenComp",(props,$)=>{const state=useState("state",{newGame:{players:[{name:"1. j√°t√©kos",level:AiLevel.Human},{name:`2. ${aiLevelToString(AiLevel.Easy)}`,level:AiLevel.Easy}],hintsCount:3,boardIndex:0},changeLevelIndex:void 0}),changeLevelName=()=>state.changeLevelIndex==null?"":state.newGame.players.at(state.changeLevelIndex)?.name??"",warning2=()=>{const players2=state.newGame.players;if(players2.length<2)return"Legal√°bb k√©t j√°t√©kos kell!";if(!players2.find(player2=>player2.level===AiLevel.Human))return"Legal√°bb egy emberi j√°t√©kosnak kell lennie!"};function nextBoard(offset){mutateState($.debugName,"nextBoard [t6wx01]",()=>{state.newGame.boardIndex+=offset,state.newGame.boardIndex<0&&(state.newGame.boardIndex=BOARDS.length-1),state.newGame.boardIndex>=BOARDS.length&&(state.newGame.boardIndex=0)})}function addPlayer(){mutateState($.debugName,"addPlayer [t6wx02]",()=>{state.newGame.players.push({name:`${state.newGame.players.length+1}. j√°t√©kos`,level:AiLevel.Human})})}function removePlayer(index){mutateState($.debugName,"removePlayer [t6wx03]",()=>{state.newGame.players.splice(index,1)})}function changeLevel(index){mutateState($.debugName,"changeLevel [t6wx04]",()=>{state.changeLevelIndex=index})}function selectLevel(aiLevel){mutateState($.debugName,"selectLevel [t6wx05]",()=>{const player2=state.newGame.players.at(state.changeLevelIndex);player2&&(player2.level!==aiLevel&&(player2.level=aiLevel,player2.name=`${state.changeLevelIndex+1}. ${aiLevelToString(aiLevel)}`),closeChangeLevel())})}function closeChangeLevel(){mutateState($.debugName,"closeChangeLevel [t6wx06]",()=>{state.changeLevelIndex=void 0})}function onInputHintsCount(e){const value=e.currentTarget.value.trim();if(value){const num=parseInt(value,10);!isNaN(num)&&isFinite(num)&&mutateState($.debugName,"onInputHintsCount [t6wx07]",()=>{state.newGame.hintsCount=Math.max(0,Math.min(999,num))})}}function onInputHintsBlur(e){e.currentTarget.value=state.newGame.hintsCount+""}function start(){const board2=jsonClone$1(BOARDS[state.newGame.boardIndex].board),boardSize=jsonClone$1(BOARDS[state.newGame.boardIndex].boardSize);mutateState($.debugName,"start game [t6wx08]",()=>{Object.assign(gameStore,DEFAULT_GAME_STORE),gameStore.playerInfos=state.newGame.players.map(player2=>({name:player2.name,aiLevel:player2.level,hints:state.newGame.hintsCount})),gameStore.states=[{mode:Mode.PlaceTile,playerScores:state.newGame.players.map(()=>0),hands:state.newGame.players.map(()=>range(HAND_SIZE).map(()=>null)),playerIndex:null,fieldIndex:null,handIndex:null,startingHandCount:null,skipCount:null,hintUsed:!1,handIndicesToReplace:range(HAND_SIZE).map(()=>!1),board:board2,boardSize,bag:LETTERS.flatMap(({count,letter,score})=>range(count).map(()=>({letter,score,isOwned:null,isJoker:letter===" "||null,isLast:null})))}]}),gameStore.startGame(),replaceLocation("game")}return $.append(jsxs("div",{class:"screen",children:[jsx(HeaderComp,{children:"√öj j√°t√©k"}),jsxs("div",{class:css["board-and-buttons"],children:[jsx(BoardComp,{isSmaller:!0,getBoardInfo:()=>BOARDS[state.newGame.boardIndex],onSetJokerLetter:()=>{}}),jsxs(ButtonsComp,{children:[jsxs("button",{onclick:()=>nextBoard(-1),children:[jsx(IconComp,{icon:arrowLeftIcon})," El≈ëz≈ë t√°bla"]}),jsxs("button",{onclick:()=>nextBoard(1),children:["K√∂vetkez≈ë t√°bla ",jsx(IconComp,{icon:arrowRightIcon})]})]})]}),jsxs("div",{class:css.form,children:[jsxs("div",{class:css["form-control"],children:[jsx("div",{class:css["form-label"],children:"J√°t√©kosok"}),jsx("div",{class:css.players,children:jsx(For,{debugName:"players [t6c1j8]",each:()=>state.newGame.players,render:newPlayer=>jsxs(Fragment,{children:[jsx("input",{value:()=>newPlayer.item.name,oninput:e=>{mutateState($.debugName,"update player name [t6wx09]",()=>{newPlayer.item.name=e.currentTarget.value})},size:12,disabled:()=>newPlayer.item.level!==AiLevel.Human}),jsxs("button",{onclick:()=>changeLevel(newPlayer.index),children:[jsx(IconComp,{icon:()=>aiLevelToIcon(newPlayer.item.level),color:()=>aiLevelToColor(newPlayer.item.level)})," ",()=>aiLevelToString(newPlayer.item.level)]}),jsx("button",{onclick:()=>removePlayer(newPlayer.index),children:jsx(IconComp,{icon:trashIcon,color:"lch(80 100 30)"})})]})})}),jsx(Show,{when:()=>state.newGame.players.length===0,then:()=>jsx("div",{class:css.none,children:"Nincsenek j√°t√©kosok!"})}),jsx(ButtonsComp,{children:jsxs("button",{onclick:addPlayer,children:[jsx(IconComp,{icon:addPlayerIcon,color:"lch(80 100 180)"})," √öj j√°t√©kos"]})})]}),jsxs("div",{class:css["form-control"],children:[jsx("label",{class:css["form-label"],for:"hints-count",children:"Tippek"}),jsx("div",{class:css["form-control-centered"],children:jsx("input",{id:"hints-count",value:()=>state.newGame.hintsCount+"",oninput:e=>onInputHintsCount(e),onblur:e=>onInputHintsBlur(e),size:1})})]}),jsx(WarningComp,{warning:warning2}),jsx(ButtonsComp,{children:jsxs("button",{onclick:()=>start(),disabled:()=>!!warning2(),children:[jsx(IconComp,{icon:playIcon,color:"lch(80 100 260)"})," Start!"]})})]}),jsxs(DialogComp,{isOpen:()=>state.changeLevelIndex!=null,children:[jsx(DialogHeaderComp,{onClose:()=>closeChangeLevel(),children:changeLevelName}),jsx(DialogBodyComp,{children:jsx("div",{class:css["form-buttons"],children:jsx(For,{debugName:"AI level buttons [t6c1io]",each:()=>LEVELS,render:aiLevel=>jsxs("button",{onclick:()=>selectLevel(aiLevel.item),children:[jsx(IconComp,{icon:()=>aiLevelToIcon(aiLevel.item),color:()=>aiLevelToColor(aiLevel.item)}),()=>aiLevelToString(aiLevel.item)]})})})})]})]})),$}),AppComp=defineComponent("AppComp",(props,$)=>{window.addEventListener("hashchange",onHashChange),onHashChange();function acceptConfirm(){try{uiStore.confirm?.ok()}catch(e){console.error(e)}mutateState($.debugName,"clear confirm [t68hvx]",()=>{uiStore.confirm=void 0})}function cancelConfirm(){mutateState($.debugName,"cancel confirm [t68hvy]",()=>{uiStore.confirm=void 0})}return $.append(jsxs(Fragment,{children:[jsx(Show,{when:()=>uiStore.screen===Screen.Menu,then:()=>jsx(MenuScreenComp,{})}),jsx(Show,{when:()=>uiStore.screen===Screen.New,then:()=>jsx(NewGameScreenComp,{})}),jsx(Show,{when:()=>uiStore.screen===Screen.Game,then:()=>jsx(GameScreenComp,{})}),jsxs(DialogComp,{isOpen:()=>!!uiStore.error,children:[jsx(DialogHeaderComp,{onClose:()=>mutateState($.debugName,"clear error [t68hvz]",()=>{uiStore.error=""}),children:"Hiba!"}),jsx(DialogBodyComp,{children:jsx(ErrorComp,{error:uiStore.error})})]}),jsx(DialogComp,{isOpen:()=>uiStore.isLocked(),openDelay:1,children:jsx(IconComp,{icon:loadingSvg})}),jsxs(DialogComp,{isOpen:()=>!!uiStore.confirm,children:[jsx(DialogHeaderComp,{onClose:cancelConfirm,children:()=>uiStore.confirm?.title}),jsxs(DialogBodyComp,{children:[jsx("div",{class:css$l.message,children:()=>uiStore.confirm?.message}),jsxs(ButtonsComp,{children:[jsxs("button",{onclick:acceptConfirm,class:"green",children:[jsx(IconComp,{icon:okIcon})," Rendben"]}),jsxs("button",{onclick:cancelConfirm,class:"red",children:[jsx(IconComp,{icon:cancelIcon})," M√©gse"]})]})]})]})]})),$});function gameState1ToGame(gs1){const{players:players2,...gs1Rest}=gs1,playerInfos=gs1.players.map(player2=>({aiLevel:AiLevel.Human,name:player2.name})),game1={id:crypto.randomUUID(),name:gameNameFromPlayerInfos(playerInfos),timestamp:Date.now(),playerInfos,states:[{...gs1Rest,playerScores:players2.map(player2=>player2.score)}]};return upgradeGame(game1)}async function migrateGameFromLocalStorage(){try{const gameFromLocalStorage=getNoError(void 0,()=>JSON.parse(localStorage[LocalStorageKey._SavedGame]));if(gameFromLocalStorage){gameFromLocalStorage.boardSize||(gameFromLocalStorage.boardSize={width:BOARD_SIZE,height:BOARD_SIZE});const game=gameState1ToGame(gameFromLocalStorage);await storeGameToDb(game),localStorage.removeItem(LocalStorageKey._SavedGame),localStorage.setItem(LocalStorageKey.LastGameId,game.id)}}catch(e){console.error("[ry5hqd]",e)}}await uiStore.lockWhile("index [t6c2d9]",()=>migrateGameFromLocalStorage());document.getElementById("app")?.append(jsx(AppComp,{}));const updateServiceWorker=registerSW({onNeedRefresh(){mutateState("index","set updateServiceWorker [t6c9j3]",()=>{uiStore.updateServiceWorker=()=>updateServiceWorker(!0)})},onOfflineReady(){}});
